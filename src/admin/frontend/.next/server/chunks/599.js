exports.id=599,exports.ids=[599],exports.modules={6566:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},4328:(e,s,r)=>{Promise.resolve().then(r.bind(r,9992))},194:(e,s,r)=>{Promise.resolve().then(r.bind(r,2632))},9992:(e,s,r)=>{"use strict";r.d(s,{default:()=>v});var t=r(326),a=r(7577),n=r(4066),l=r(9798),i=r(9734),o=r(4061),c=r(6754),d=r(165),m=r(8378),u=r(3062),h=r(4019),x=r(748),f=r(8307),g=r(6507),p=r(1810),y=r(434),N=r(5047);let j=[{name:"Dashboard",href:"/admin/dashboard",icon:l.Z,roles:["SUPER_ADMIN","PLATFORM_ADMIN","SUPPORT","DEVELOPER"]},{name:"Tenants",href:"/admin/tenants",icon:i.Z,roles:["SUPER_ADMIN","PLATFORM_ADMIN"]},{name:"Users",href:"/admin/users",icon:o.Z,roles:["SUPER_ADMIN","PLATFORM_ADMIN","SUPPORT"]},{name:"Analytics",href:"/admin/analytics",icon:c.Z,roles:["SUPER_ADMIN","PLATFORM_ADMIN"]},{name:"Security",href:"/admin/security",icon:d.Z,roles:["SUPER_ADMIN","PLATFORM_ADMIN"]},{name:"System",href:"/admin/system",icon:m.Z,roles:["SUPER_ADMIN","DEVELOPER"]},{name:"Support",href:"/admin/support",icon:u.Z,roles:["SUPER_ADMIN","PLATFORM_ADMIN","SUPPORT"]}];function v({children:e}){let[s,r]=(0,a.useState)(!1),{user:l,logout:i,hasRole:o}=(0,n.J3)(),c=(0,N.usePathname)(),m=async()=>{try{await i()}catch(e){console.error("Logout error:",e)}},u=j.filter(e=>e.roles.some(e=>o(e)));return(0,t.jsxs)("div",{className:"h-screen flex overflow-hidden bg-gray-50",children:[s&&(0,t.jsxs)("div",{className:"fixed inset-0 flex z-40 md:hidden",children:[t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),(0,t.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[t.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:t.jsx("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>r(!1),children:t.jsx(h.Z,{className:"h-6 w-6 text-white"})})}),(0,t.jsxs)("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 flex items-center px-4",children:[t.jsx("div",{className:"h-8 w-8 bg-admin-primary rounded-lg flex items-center justify-center",children:t.jsx(d.Z,{className:"h-5 w-5 text-white"})}),t.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Admin Panel"})]}),t.jsx("nav",{className:"mt-5 px-2 space-y-1",children:u.map(e=>{let s=c===e.href;return(0,t.jsxs)(y.default,{href:e.href,className:`${s?"bg-admin-primary text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"} group flex items-center px-2 py-2 text-base font-medium rounded-md`,children:[t.jsx(e.icon,{className:"mr-4 h-6 w-6"}),e.name]},e.name)})})]})]})]}),t.jsx("div",{className:"hidden md:flex md:flex-shrink-0",children:t.jsx("div",{className:"flex flex-col w-64",children:(0,t.jsxs)("div",{className:"flex flex-col h-0 flex-1 border-r border-gray-200 bg-white",children:[(0,t.jsxs)("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center flex-shrink-0 px-4",children:[t.jsx("div",{className:"h-8 w-8 bg-admin-primary rounded-lg flex items-center justify-center",children:t.jsx(d.Z,{className:"h-5 w-5 text-white"})}),t.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900",children:"Admin Panel"})]}),t.jsx("nav",{className:"mt-5 flex-1 px-2 space-y-1",children:u.map(e=>{let s=c===e.href;return(0,t.jsxs)(y.default,{href:e.href,className:`${s?"bg-admin-primary text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"} group flex items-center px-2 py-2 text-sm font-medium rounded-md`,children:[t.jsx(e.icon,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]}),t.jsx("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-8 w-8 bg-gray-300 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-sm font-medium text-gray-700",children:l?.email?.charAt(0).toUpperCase()})})}),(0,t.jsxs)("div",{className:"ml-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:l?.email}),t.jsx("p",{className:"text-xs text-gray-500",children:l?.role})]})]})})]})})}),(0,t.jsxs)("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[(0,t.jsxs)("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow",children:[t.jsx("button",{type:"button",className:"px-4 border-r border-gray-200 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-admin-primary md:hidden",onClick:()=>r(!0),children:t.jsx(x.Z,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{className:"flex-1 px-4 flex justify-between",children:[t.jsx("div",{className:"flex-1 flex",children:(0,t.jsxs)("form",{className:"w-full flex md:ml-0",action:"#",method:"GET",children:[t.jsx("label",{htmlFor:"search-field",className:"sr-only",children:"Search"}),(0,t.jsxs)("div",{className:"relative w-full text-gray-400 focus-within:text-gray-600",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pointer-events-none",children:t.jsx(f.Z,{className:"h-5 w-5"})}),t.jsx("input",{id:"search-field",className:"block w-full h-full pl-8 pr-3 py-2 border-transparent text-gray-900 placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-0 focus:border-transparent",placeholder:"Search...",type:"search",name:"search"})]})]})}),(0,t.jsxs)("div",{className:"ml-4 flex items-center md:ml-6",children:[t.jsx("button",{type:"button",className:"bg-white p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-admin-primary",children:t.jsx(g.Z,{className:"h-6 w-6"})}),t.jsx("div",{className:"ml-3 relative",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:[l?.email," (",l?.role,")"]}),t.jsx("button",{onClick:m,className:"bg-white p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-admin-primary",title:"Logout",children:t.jsx(p.Z,{className:"h-5 w-5"})})]})})]})]})]}),t.jsx("main",{className:"flex-1 relative overflow-y-auto focus:outline-none",children:t.jsx("div",{className:"py-6",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:e})})})]})]})}},2632:(e,s,r)=>{"use strict";r.d(s,{default:()=>l});var t=r(326),a=r(4066),n=r(381);function l({children:e}){return(0,t.jsxs)(a.W,{children:[e,t.jsx(n.x7,{position:"top-center",reverseOrder:!1,gutter:8,containerClassName:"",containerStyle:{},toastOptions:{className:"",duration:4e3,style:{background:"#363636",color:"#fff",direction:"rtl",fontFamily:"Vazirmatn, Inter, sans-serif"},success:{duration:3e3,style:{background:"#10B981"}},error:{duration:5e3,style:{background:"#EF4444"}},loading:{style:{background:"#3B82F6"}}}})]})}},4066:(e,s,r)=>{"use strict";r.d(s,{J3:()=>c,W:()=>o,c2:()=>d});var t=r(326),a=r(7577),n=r(5047),l=r(7667);let i=(0,a.createContext)(void 0);function o({children:e}){let[s,r]=(0,a.useState)(null),[o,c]=(0,a.useState)(!0),[d,m]=(0,a.useState)(null),u=(0,n.useRouter)();(0,a.useCallback)(async()=>{try{if(c(!0),!l.KE()){r(null),c(!1);return}if(!await l.Wg()){l.w3(),r(null),c(!1);return}let e=await l.T();r(e),l.ZM(e,!0)}catch(e){console.error("Admin auth check failed:",e),l.w3(),r(null)}finally{c(!1)}},[]);let h=(0,a.useCallback)(async e=>{try{c(!0),m(null);let s=await l.$g(e);if(s.success)r(s.data.user),u.push("/admin/dashboard");else throw Error(s.message||"Login failed")}catch(e){throw console.error("Admin login error:",e),m(e.message||"Login failed"),e}finally{c(!1)}},[u]),x=(0,a.useCallback)(async()=>{try{c(!0),await l.rE()}catch(e){console.error("Admin logout error:",e)}finally{r(null),l.w3(),c(!1),u.push("/admin/login")}},[u]),f=(0,a.useCallback)(()=>{m(null)},[]),g=(0,a.useCallback)(e=>l.CI(s,e),[s]),p=(0,a.useCallback)(e=>l.Aw(s,e),[s]);return t.jsx(i.Provider,{value:{user:s,loading:o,error:d,login:h,logout:x,clearError:f,hasRole:g,hasAnyRole:p,isAuthenticated:!!s},children:e})}function c(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAdminAuth must be used within an AdminAuthProvider");return e}function d(e,s){return function(r){let{user:a,loading:l,hasRole:i}=c();return((0,n.useRouter)(),l)?t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-admin-primary border-t-transparent"})}):a&&(!s||i(s))?t.jsx(e,{...r}):null}}},7667:(e,s,r)=>{"use strict";r.d(s,{$g:()=>h,rE:()=>x,w3:()=>m,ZP:()=>N,T:()=>f,KE:()=>c,CI:()=>p,Aw:()=>y,ZM:()=>u,Wg:()=>g});var t,a,n,l,i=r(4099);(function(e){e.SUPER_ADMIN="SUPER_ADMIN",e.PLATFORM_ADMIN="PLATFORM_ADMIN",e.SUPPORT="SUPPORT",e.DEVELOPER="DEVELOPER"})(t||(t={})),function(e){e.HEALTHY="HEALTHY",e.WARNING="WARNING",e.CRITICAL="CRITICAL",e.MAINTENANCE="MAINTENANCE"}(a||(a={})),function(e){e.ACTIVE="ACTIVE",e.SUSPENDED="SUSPENDED",e.PENDING="PENDING",e.CANCELLED="CANCELLED"}(n||(n={})),function(e){e.STARTER="STARTER",e.BUSINESS="BUSINESS",e.ENTERPRISE="ENTERPRISE"}(l||(l={}));let o=i.Z.create({baseURL:"http://localhost:3003/api",timeout:1e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let s=c();return s&&(e.headers.Authorization=`Bearer ${s}`),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>(e.response?.status===401&&m(),Promise.reject(e)));let c=()=>null,d=(e,s=!1)=>{},m=()=>{},u=(e,s=!1)=>{},h=async e=>{try{let s=(await o.post("/admin/auth/login",e)).data;if(s.success){let{user:e,token:r}=s.data;return d(r,!0),u(e,!0),o.defaults.headers.common.Authorization=`Bearer ${r}`,{success:!0,message:s.message,data:{user:e,token:r}}}throw Error(s.message||"Login failed")}catch(e){throw console.error("Admin login error:",e),Error(e.response?.data?.message||e.message||"Login failed")}},x=async()=>{try{c()&&await o.post("/admin/auth/logout")}catch(e){console.error("Admin logout error:",e)}finally{m()}},f=async()=>{try{return(await o.get("/admin/auth/profile")).data.data}catch(e){throw console.error("Get admin profile error:",e),Error(e.response?.data?.message||e.message||"Failed to get profile")}},g=async()=>{try{return(await o.get("/admin/auth/verify")).data.success}catch(e){return console.error("Admin token verification failed:",e),!1}},p=(e,s)=>!!e&&e.role===s,y=(e,s)=>!!e&&s.includes(e.role),N=o},1266:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>n});var t=r(9510);let a=(0,r(8570).createProxy)(String.raw`D:\servaan\src\admin\frontend\src\components\AdminLayout.tsx#default`);function n({children:e}){return t.jsx(a,{children:e})}},4514:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l,metadata:()=>n});var t=r(9510);let a=(0,r(8570).createProxy)(String.raw`D:\servaan\src\admin\frontend\src\components\ClientProviders.tsx#default`);r(4315);let n={title:"سِروان | پنل مدیریت پلتفرم",description:"پنل مدیریت پلتفرم سِروان برای مدیریت مستأجرین و نظارت بر سیستم"};function l({children:e}){return(0,t.jsxs)("html",{lang:"fa",dir:"rtl",children:[(0,t.jsxs)("head",{children:[t.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),t.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),t.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Vazirmatn:wght@300;400;500;600;700;800;900&display=swap",rel:"stylesheet"})]}),t.jsx("body",{className:"font-vazir",children:t.jsx(a,{children:e})})]})}},4315:()=>{}};
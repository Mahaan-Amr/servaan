(()=>{var e={};e.id=894,e.ids=[894],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},3358:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>o,pages:()=>c,routeModule:()=>u,tree:()=>m}),s(4993),s(1266),s(4514),s(5866);var a=s(3191),r=s(8716),n=s(7922),i=s.n(n),d=s(5231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);s.d(t,l);let m=["",{children:["admin",{children:["tenants",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4993)),"D:\\servaan\\src\\admin\\frontend\\src\\app\\admin\\tenants\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1266)),"D:\\servaan\\src\\admin\\frontend\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4514)),"D:\\servaan\\src\\admin\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\servaan\\src\\admin\\frontend\\src\\app\\admin\\tenants\\page.tsx"],o="/admin/tenants/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/tenants/page",pathname:"/admin/tenants",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:m}})},9125:(e,t,s)=>{Promise.resolve().then(s.bind(s,3937))},1821:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},2714:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3937:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>z});var a=s(326),r=s(7577),n=s(5047),i=s(361),d=s(9669),l=s(6754),m=s(2881);let c=(0,m.Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),o=(0,m.Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var x=s(8307);let u=(0,m.Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var h=s(949),p=s(9734),b=s(4061),g=s(1821),j=s(2714),v=s(9508);let f=(0,m.Z)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var y=s(381),N=s(7605),w=s(4241),k=s(4066),C=s(4019);let A=(0,m.Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var S=s(8378),R=s(165);let E=(0,m.Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function Z({tenant:e,isOpen:t,onClose:s,onSave:n}){let[i,d]=(0,r.useState)({}),[l,m]=(0,r.useState)(!1),[c,o]=(0,r.useState)("basic"),x=(e,t)=>{d(s=>({...s,[e]:t}))},u=e=>{d(t=>({...t,features:{hasInventoryManagement:t.features?.hasInventoryManagement??!1,hasCustomerManagement:t.features?.hasCustomerManagement??!1,hasAccountingSystem:t.features?.hasAccountingSystem??!1,hasReporting:t.features?.hasReporting??!1,hasNotifications:t.features?.hasNotifications??!1,hasAdvancedReporting:t.features?.hasAdvancedReporting??!1,hasApiAccess:t.features?.hasApiAccess??!1,hasCustomBranding:t.features?.hasCustomBranding??!1,hasMultiLocation:t.features?.hasMultiLocation??!1,hasAdvancedCRM:t.features?.hasAdvancedCRM??!1,hasWhatsappIntegration:t.features?.hasWhatsappIntegration??!1,hasInstagramIntegration:t.features?.hasInstagramIntegration??!1,hasAnalyticsBI:t.features?.hasAnalyticsBI??!1,[e]:!t.features?.[e]}}))},h=async t=>{if(t.preventDefault(),e)try{m(!0);let t=await (0,N.Jq)(e.id,i);y.Am.success("مستأجر با موفقیت به‌روزرسانی شد"),n(t),s()}catch(e){y.Am.error(e.message||"خطا در به‌روزرسانی مستأجر")}finally{m(!1)}};return t&&e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-admin shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-admin-border",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(p.Z,{className:"h-6 w-6 text-admin-primary ml-2"}),a.jsx("h2",{className:"text-xl font-bold text-admin-text",children:"ویرایش مستأجر"})]}),a.jsx("button",{onClick:s,className:"text-admin-text-muted hover:text-admin-text",children:a.jsx(C.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"flex border-b border-admin-border",children:[(0,a.jsxs)("button",{onClick:()=>o("basic"),className:`px-6 py-3 text-sm font-medium border-b-2 ${"basic"===c?"border-admin-primary text-admin-primary":"border-transparent text-admin-text-muted hover:text-admin-text"}`,children:[a.jsx(A,{className:"h-4 w-4 ml-2 inline"}),"اطلاعات پایه"]}),(0,a.jsxs)("button",{onClick:()=>o("features"),className:`px-6 py-3 text-sm font-medium border-b-2 ${"features"===c?"border-admin-primary text-admin-primary":"border-transparent text-admin-text-muted hover:text-admin-text"}`,children:[a.jsx(S.Z,{className:"h-4 w-4 ml-2 inline"}),"ویژگی‌ها"]}),(0,a.jsxs)("button",{onClick:()=>o("advanced"),className:`px-6 py-3 text-sm font-medium border-b-2 ${"advanced"===c?"border-admin-primary text-admin-primary":"border-transparent text-admin-text-muted hover:text-admin-text"}`,children:[a.jsx(R.Z,{className:"h-4 w-4 ml-2 inline"}),"تنظیمات پیشرفته"]})]}),(0,a.jsxs)("form",{onSubmit:h,className:"p-6",children:["basic"===c&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام مستأجر *"}),a.jsx("input",{type:"text",value:i.name||"",onChange:e=>x("name",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام نمایشی"}),a.jsx("input",{type:"text",value:i.displayName||"",onChange:e=>x("displayName",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"ایمیل مالک *"}),a.jsx("input",{type:"email",value:i.ownerEmail||"",onChange:e=>x("ownerEmail",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام مالک"}),a.jsx("input",{type:"text",value:i.ownerName||"",onChange:e=>x("ownerName",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شماره تلفن"}),a.jsx("input",{type:"tel",value:i.ownerPhone||"",onChange:e=>x("ownerPhone",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نوع کسب و کار"}),a.jsx("input",{type:"text",value:i.businessType||"",onChange:e=>x("businessType",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شهر"}),a.jsx("input",{type:"text",value:i.city||"",onChange:e=>x("city",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"کشور *"}),a.jsx("input",{type:"text",value:i.country||"",onChange:e=>x("country",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"توضیحات"}),a.jsx("textarea",{value:i.description||"",onChange:e=>x("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]}),"features"===c&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"طرح *"}),(0,a.jsxs)("select",{value:i.plan||"",onChange:e=>x("plan",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,children:[a.jsx("option",{value:"STARTER",children:"استارتر"}),a.jsx("option",{value:"BUSINESS",children:"بیزینس"}),a.jsx("option",{value:"ENTERPRISE",children:"انترپرایز"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"وضعیت"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 space-x-reverse",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"isActive",checked:!0===i.isActive,onChange:()=>x("isActive",!0),className:"ml-2 text-admin-primary focus:ring-admin-primary"}),"فعال"]}),(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"isActive",checked:!1===i.isActive,onChange:()=>x("isActive",!1),className:"ml-2 text-admin-primary focus:ring-admin-primary"}),"غیرفعال"]})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-admin-text mb-4",children:"ویژگی‌های سیستم"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.features&&Object.entries(i.features).map(([e,t])=>(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:t,onChange:()=>u(e),className:"ml-2 text-admin-primary focus:ring-admin-primary"}),a.jsx("span",{className:"text-sm text-admin-text",children:{hasInventoryManagement:"مدیریت موجودی",hasCustomerManagement:"مدیریت مشتریان",hasAccountingSystem:"سیستم حسابداری",hasReporting:"گزارش‌گیری",hasNotifications:"اعلان‌ها",hasAdvancedReporting:"گزارش‌گیری پیشرفته",hasApiAccess:"دسترسی API",hasCustomBranding:"برندینگ سفارشی",hasMultiLocation:"چند شعبه",hasAdvancedCRM:"CRM پیشرفته",hasWhatsappIntegration:"ادغام واتساپ",hasInstagramIntegration:"ادغام اینستاگرام",hasAnalyticsBI:"تحلیل و هوش تجاری"}[e]||e})]},e))})]})]}),"advanced"===c&&a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-admin-bg p-4 rounded-admin",children:[a.jsx("h3",{className:"text-lg font-medium text-admin-text mb-4",children:"تنظیمات پیشرفته"}),a.jsx("p",{className:"text-sm text-admin-text-muted",children:"این بخش برای تنظیمات پیشرفته و دسترسی‌های خاص در نظر گرفته شده است."})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 space-x-reverse pt-6 border-t border-admin-border",children:[a.jsx("button",{type:"button",onClick:s,className:"btn-admin-secondary",disabled:l,children:"انصراف"}),a.jsx("button",{type:"submit",className:"btn-admin-primary flex items-center",disabled:l,children:l?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}),"در حال ذخیره..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(E,{className:"h-4 w-4 ml-2"}),"ذخیره تغییرات"]})})]})]})]})}):null}let M=(0,m.Z)("square-check-big",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),P=(0,m.Z)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),q=(0,m.Z)("power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),I=(0,m.Z)("power-off",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function T({tenants:e,selectedTenants:t,onSelectionChange:s,onRefresh:n}){let[l,m]=(0,r.useState)(!1),[o,x]=(0,r.useState)(!1),[u,p]=(0,r.useState)(null),b=t.length===e.length&&e.length>0;t.length>0&&(t.length,e.length);let g=async(e,s)=>{if(0===t.length){y.Am.error("لطفاً حداقل یک مستأجر را انتخاب کنید");return}"export"===e?p({type:"export",format:s}):p({type:e}),x(!0)},j=async()=>{if(u&&0!==t.length)try{if(m(!0),"export"===u.type&&u.format)await (0,N.oL)(u.format),y.Am.success(`صادرات ${t.length} مستأجر با موفقیت انجام شد`);else if("activate"===u.type||"deactivate"===u.type){let e="activate"===u.type;await (0,N._7)(t,e);let a=e?"فعال":"غیرفعال";y.Am.success(`${t.length} مستأجر با موفقیت ${a} شد`),n(),s([])}}catch(e){y.Am.error(e.message||"خطا در انجام عملیات گروهی")}finally{m(!1),x(!1),p(null)}};return 0===e.length?null:(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:`bg-admin-primary text-white p-4 rounded-admin transition-all duration-300 ${t.length>0?"opacity-100 translate-y-0":"opacity-0 -translate-y-full absolute"}`,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsx("div",{className:"flex items-center",children:(0,a.jsxs)("button",{onClick:()=>{b?s([]):s(e.map(e=>e.id))},className:"flex items-center text-white hover:text-admin-bg transition-colors",children:[b?a.jsx(M,{className:"h-5 w-5 ml-2"}):a.jsx(P,{className:"h-5 w-5 ml-2"}),b?"حذف انتخاب همه":"انتخاب همه"]})}),(0,a.jsxs)("div",{className:"text-sm",children:[t.length," مستأجر انتخاب شده"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 space-x-reverse",children:[(0,a.jsxs)("button",{onClick:()=>g("activate"),disabled:l,className:"flex items-center px-3 py-2 bg-admin-success hover:bg-admin-success-dark text-white rounded-admin text-sm transition-colors disabled:opacity-50",children:[a.jsx(q,{className:"h-4 w-4 ml-2"}),"فعال‌سازی گروهی"]}),(0,a.jsxs)("button",{onClick:()=>g("deactivate"),disabled:l,className:"flex items-center px-3 py-2 bg-admin-warning hover:bg-admin-warning-dark text-white rounded-admin text-sm transition-colors disabled:opacity-50",children:[a.jsx(I,{className:"h-4 w-4 ml-2"}),"غیرفعال‌سازی گروهی"]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("button",{disabled:l,className:"flex items-center px-3 py-2 bg-admin-info hover:bg-admin-info-dark text-white rounded-admin text-sm transition-colors disabled:opacity-50",children:[a.jsx(c,{className:"h-4 w-4 ml-2"}),"صادرات",a.jsx("svg",{className:"h-4 w-4 mr-2 transition-transform group-hover:rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-white border border-admin-border rounded-admin shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:(0,a.jsxs)("div",{className:"py-2",children:[a.jsx("button",{onClick:()=>g("export","csv"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"صادرات CSV"}),a.jsx("button",{onClick:()=>g("export","excel"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"صادرات Excel"}),a.jsx("button",{onClick:()=>g("export","pdf"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"صادرات PDF"})]})})]}),a.jsx("button",{onClick:()=>s([]),className:"text-white hover:text-admin-bg transition-colors",title:"حذف انتخاب",children:a.jsx(d.Z,{className:"h-5 w-5"})})]})]})}),o&&u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-admin shadow-xl max-w-md w-full",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:["export"===u.type?a.jsx(c,{className:"h-6 w-6 text-admin-info ml-2"}):"activate"===u.type?a.jsx(i.Z,{className:"h-6 w-6 text-admin-success ml-2"}):a.jsx(h.Z,{className:"h-6 w-6 text-admin-warning ml-2"}),(0,a.jsxs)("h3",{className:"text-lg font-bold text-admin-text",children:["export"===u.type&&"تأیید صادرات","activate"===u.type&&"تأیید فعال‌سازی گروهی","deactivate"===u.type&&"تأیید غیرفعال‌سازی گروهی"]})]}),(0,a.jsxs)("p",{className:"text-admin-text mb-6",children:["export"===u.type&&`آیا می‌خواهید ${t.length} مستأجر انتخاب شده را به فرمت ${u.format?.toUpperCase()} صادر کنید؟`,"activate"===u.type&&`آیا می‌خواهید ${t.length} مستأجر انتخاب شده را فعال کنید؟`,"deactivate"===u.type&&`آیا می‌خواهید ${t.length} مستأجر انتخاب شده را غیرفعال کنید؟`]}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 space-x-reverse",children:[a.jsx("button",{onClick:()=>{x(!1),p(null)},className:"btn-admin-secondary",disabled:l,children:"انصراف"}),a.jsx("button",{onClick:j,className:`btn-admin-primary flex items-center ${"deactivate"===u.type?"bg-admin-warning hover:bg-admin-warning-dark":""}`,disabled:l,children:l?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}),"در حال انجام..."]}):(0,a.jsxs)(a.Fragment,{children:["export"===u.type&&a.jsx(c,{className:"h-4 w-4 ml-2"}),"activate"===u.type&&a.jsx(i.Z,{className:"h-4 w-4 ml-2"}),"deactivate"===u.type&&a.jsx(h.Z,{className:"h-4 w-4 ml-2"}),"تأیید"]})})]})]})})})]})}var $=s(6697),_=s(7069),F=s(9163);function D({className:e=""}){let[t,s]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),[d,m]=(0,r.useState)(!0),[o,x]=(0,r.useState)(null),[u,h]=(0,r.useState)(30),[j,v]=(0,r.useState)("day"),[f,w]=(0,r.useState)("monthly"),[k,C]=(0,r.useState)(new Date().getFullYear()),A=async()=>{try{m(!0),x(null);let[e,t]=await Promise.all([(0,N.bm)(u,j),(0,N.uW)(f,k)]);s(e),i(t)}catch(e){x(e.message),y.Am.error("خطا در بارگذاری داده‌های تحلیلی")}finally{m(!1)}},S=async e=>{try{await (0,N.oL)(e),y.Am.success(`صادرات داده‌های تحلیلی با موفقیت انجام شد`)}catch(e){y.Am.error(e.message||"خطا در صادرات داده‌ها")}},R=e=>new Intl.NumberFormat("fa-IR",{style:"currency",currency:"IRR",minimumFractionDigits:0}).format(e);return!d||t||n?o?a.jsx("div",{className:`bg-white rounded-admin border border-admin-border p-6 ${e}`,children:(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx($.Z,{className:"h-16 w-16 text-admin-danger mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-admin-text mb-2",children:"خطا در بارگذاری داده‌ها"}),a.jsx("p",{className:"text-admin-text-light mb-4",children:o}),a.jsx("button",{onClick:A,className:"btn-admin-primary",children:"تلاش مجدد"})]})}):(0,a.jsxs)("div",{className:`bg-white rounded-admin border border-admin-border ${e}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-admin-border",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(l.Z,{className:"h-6 w-6 text-admin-primary ml-2"}),a.jsx("h2",{className:"text-xl font-bold text-admin-text",children:"داشبورد تحلیلی مستأجرین"})]}),a.jsx("div",{className:"flex items-center space-x-3 space-x-reverse",children:(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("button",{className:"btn-admin-secondary flex items-center",children:[a.jsx(c,{className:"h-4 w-4 ml-2"}),"صادرات"]}),a.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-32 bg-white border border-admin-border rounded-admin shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:(0,a.jsxs)("div",{className:"py-2",children:[a.jsx("button",{onClick:()=>S("csv"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"CSV"}),a.jsx("button",{onClick:()=>S("excel"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"Excel"}),a.jsx("button",{onClick:()=>S("pdf"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"PDF"})]})})]})})]}),a.jsx("div",{className:"p-6 border-b border-admin-border",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"دوره رشد"}),(0,a.jsxs)("select",{value:u,onChange:e=>h(Number(e.target.value)),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[a.jsx("option",{value:7,children:"۷ روز"}),a.jsx("option",{value:30,children:"۳۰ روز"}),a.jsx("option",{value:90,children:"۹۰ روز"}),a.jsx("option",{value:365,children:"یک سال"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"گروه‌بندی رشد"}),(0,a.jsxs)("select",{value:j,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[a.jsx("option",{value:"day",children:"روزانه"}),a.jsx("option",{value:"week",children:"هفتگی"}),a.jsx("option",{value:"month",children:"ماهانه"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"دوره درآمد"}),(0,a.jsxs)("select",{value:f,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[a.jsx("option",{value:"daily",children:"روزانه"}),a.jsx("option",{value:"weekly",children:"هفتگی"}),a.jsx("option",{value:"monthly",children:"ماهانه"}),a.jsx("option",{value:"yearly",children:"سالانه"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"سال"}),a.jsx("select",{value:k,onChange:e=>C(Number(e.target.value)),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:Array.from({length:5},(e,t)=>new Date().getFullYear()-t).map(e=>a.jsx("option",{value:e,children:e},e))})]})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-gradient-to-br from-admin-primary to-admin-primary-dark text-white p-6 rounded-admin",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-admin-bg text-sm font-medium",children:"کل مستأجرین"}),a.jsx("p",{className:"text-3xl font-bold",children:t?.data?t.data.reduce((e,t)=>e+t.new_tenants,0):0})]}),a.jsx(p.Z,{className:"h-12 w-12 text-admin-bg opacity-80"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-admin-success to-admin-success-dark text-white p-6 rounded-admin",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-admin-bg text-sm font-medium",children:"مستأجرین فعال"}),a.jsx("p",{className:"text-3xl font-bold",children:t?.data?t.data.reduce((e,t)=>e+t.active_tenants,0):0})]}),a.jsx(b.Z,{className:"h-12 w-12 text-admin-bg opacity-80"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-admin-warning to-admin-warning-dark text-white p-6 rounded-admin",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-admin-bg text-sm font-medium",children:"کل درآمد"}),a.jsx("p",{className:"text-3xl font-bold",children:n?.summary.totalRevenue?R(n.summary.totalRevenue):"0"})]}),a.jsx(g.Z,{className:"h-12 w-12 text-admin-bg opacity-80"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-admin-bg p-6 rounded-admin",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-admin-text mb-4 flex items-center",children:[a.jsx(_.Z,{className:"h-5 w-5 text-admin-primary ml-2"}),"روند رشد مستأجرین"]}),t?.data&&t.data.length>0?a.jsx("div",{className:"space-y-3",children:t.data.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-admin-text",children:new Date(e.period).toLocaleDateString("fa-IR")}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 space-x-reverse",children:[(0,a.jsxs)("span",{className:"text-sm text-admin-text",children:["جدید: ",e.new_tenants]}),(0,a.jsxs)("span",{className:"text-sm text-admin-success",children:["فعال: ",e.active_tenants]})]})]},t))}):a.jsx("div",{className:"text-center py-8 text-admin-text-muted",children:"داده‌ای برای نمایش وجود ندارد"})]}),(0,a.jsxs)("div",{className:"bg-admin-bg p-6 rounded-admin",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-admin-text mb-4 flex items-center",children:[a.jsx(g.Z,{className:"h-5 w-5 text-admin-warning ml-2"}),"روند درآمد"]}),n?.data&&n.data.length>0?a.jsx("div",{className:"space-y-3",children:n.data.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-admin-text",children:e.period}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsx("span",{className:"text-sm text-admin-text",children:R(e.revenue)}),(0,a.jsxs)("span",{className:`text-sm flex items-center ${e.growth>=0?"text-admin-success":"text-admin-danger"}`,children:[e.growth>=0?a.jsx(_.Z,{className:"h-3 w-3 ml-1"}):a.jsx(F.Z,{className:"h-3 w-3 ml-1"}),Math.abs(e.growth),"%"]})]})]},t))}):a.jsx("div",{className:"text-center py-8 text-admin-text-muted",children:"داده‌ای برای نمایش وجود ندارد"})]})]}),n?.summary&&(0,a.jsxs)("div",{className:"mt-8 bg-admin-bg p-6 rounded-admin",children:[a.jsx("h3",{className:"text-lg font-medium text-admin-text mb-4",children:"خلاصه درآمد"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-admin-text-muted mb-1",children:"کل درآمد"}),a.jsx("p",{className:"text-2xl font-bold text-admin-text",children:R(n.summary.totalRevenue)})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-admin-text-muted mb-1",children:"میانگین رشد"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-admin-success",children:[n.summary.averageGrowth,"%"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-admin-text-muted mb-1",children:"بهترین ماه"}),a.jsx("p",{className:"text-2xl font-bold text-admin-primary",children:n.summary.topMonth})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-admin-text-muted mb-1",children:"بیشترین درآمد"}),a.jsx("p",{className:"text-2xl font-bold text-admin-warning",children:R(n.summary.topRevenue)})]})]})]})]})]}):a.jsx("div",{className:`bg-white rounded-admin border border-admin-border p-6 ${e}`,children:(0,a.jsxs)("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-admin-bg rounded w-1/4 mb-4"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsx("div",{className:"h-20 bg-admin-bg rounded"}),a.jsx("div",{className:"h-20 bg-admin-bg rounded"}),a.jsx("div",{className:"h-20 bg-admin-bg rounded"})]}),a.jsx("div",{className:"h-64 bg-admin-bg rounded"})]})})}function L({isOpen:e,onClose:t,onSuccess:s}){let[n,i]=(0,r.useState)({name:"",displayName:"",subdomain:"",description:"",plan:"STARTER",ownerName:"",ownerEmail:"",ownerPhone:"",businessType:"",city:"",country:"ایران",isActive:!0}),[d,l]=(0,r.useState)(!1),m=(e,t)=>{i(s=>({...s,[e]:t}))},c=async e=>{e.preventDefault();try{l(!0),await new Promise(e=>setTimeout(e,1e3)),y.Am.success("مستأجر جدید با موفقیت ایجاد شد"),s(),t(),i({name:"",displayName:"",subdomain:"",description:"",plan:"STARTER",ownerName:"",ownerEmail:"",ownerPhone:"",businessType:"",city:"",country:"ایران",isActive:!0})}catch(e){y.Am.error(e.message||"خطا در ایجاد مستأجر جدید")}finally{l(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-admin shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-admin-border",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(p.Z,{className:"h-6 w-6 text-admin-primary ml-2"}),a.jsx("h2",{className:"text-xl font-bold text-admin-text",children:"ایجاد مستأجر جدید"})]}),a.jsx("button",{onClick:t,className:"text-admin-text-muted hover:text-admin-text",children:a.jsx(C.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("form",{onSubmit:c,className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام مستأجر *"}),a.jsx("input",{type:"text",value:n.name,onChange:e=>m("name",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,placeholder:"نام مستأجر"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام نمایشی"}),a.jsx("input",{type:"text",value:n.displayName,onChange:e=>m("displayName",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"نام نمایشی"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"زیردامنه *"}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("input",{type:"text",value:n.subdomain,onChange:e=>m("subdomain",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,placeholder:"نام زیردامنه"}),a.jsx("span",{className:"mr-2 text-admin-text-muted",children:".servaan.com"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"طرح *"}),(0,a.jsxs)("select",{value:n.plan,onChange:e=>m("plan",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,children:[a.jsx("option",{value:"STARTER",children:"استارتر"}),a.jsx("option",{value:"BUSINESS",children:"بیزینس"}),a.jsx("option",{value:"ENTERPRISE",children:"انترپرایز"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام مالک *"}),a.jsx("input",{type:"text",value:n.ownerName,onChange:e=>m("ownerName",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,placeholder:"نام مالک"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"ایمیل مالک *"}),a.jsx("input",{type:"email",value:n.ownerEmail,onChange:e=>m("ownerEmail",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,placeholder:"ایمیل مالک"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شماره تلفن"}),a.jsx("input",{type:"tel",value:n.ownerPhone,onChange:e=>m("ownerPhone",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"شماره تلفن"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نوع کسب و کار"}),a.jsx("input",{type:"text",value:n.businessType,onChange:e=>m("businessType",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"نوع کسب و کار"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شهر"}),a.jsx("input",{type:"text",value:n.city,onChange:e=>m("city",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"شهر"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"کشور"}),a.jsx("input",{type:"text",value:n.country,onChange:e=>m("country",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"کشور"})]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"توضیحات"}),a.jsx("textarea",{value:n.description,onChange:e=>m("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"توضیحات مستأجر"})]}),a.jsx("div",{className:"mt-6",children:(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:n.isActive,onChange:e=>m("isActive",e.target.checked),className:"ml-2 text-admin-primary focus:ring-admin-primary"}),a.jsx("span",{className:"text-sm text-admin-text",children:"مستأجر فعال باشد"})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 space-x-reverse pt-6 border-t border-admin-border",children:[a.jsx("button",{type:"button",onClick:t,className:"btn-admin-secondary",disabled:d,children:"انصراف"}),a.jsx("button",{type:"submit",className:"btn-admin-primary flex items-center",disabled:d,children:d?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}),"در حال ایجاد..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(E,{className:"h-4 w-4 ml-2"}),"ایجاد مستأجر"]})})]})]})]})}):null}let z=(0,k.c2)(function(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)([]),[m,k]=(0,r.useState)(!0),[C,A]=(0,r.useState)(null),[S,R]=(0,r.useState)({page:1,limit:10,total:0,pages:0}),[E,M]=(0,r.useState)(""),[P,q]=(0,r.useState)("all"),[I,$]=(0,r.useState)("all"),[_,F]=(0,r.useState)(!1),[z,B]=(0,r.useState)([]),[V,H]=(0,r.useState)(!1),[U,W]=(0,r.useState)(null),[G,O]=(0,r.useState)(!1),[Y,J]=(0,r.useState)(!1),X=async(e={})=>{try{k(!0),A(null);let t={page:e.page||S.page,limit:e.limit||S.limit,search:void 0!==e.search?e.search:E,status:void 0!==e.status?e.status:P,plan:void 0!==e.plan?e.plan:I},a=await (0,N.ax)(t);s(a.tenants),R(a.pagination),e.page&&R(t=>({...t,page:e.page})),e.limit&&R(t=>({...t,limit:e.limit})),void 0!==e.search&&M(e.search),void 0!==e.status&&q(e.status),void 0!==e.plan&&$(e.plan)}catch(e){A(e.message),y.Am.error(e.message)}finally{k(!1)}},K=e=>{M(e),X({search:e,page:1})},Q=e=>{q(e),X({status:e,page:1})},ee=e=>{$(e),X({plan:e,page:1})},et=e=>{R(t=>({...t,limit:e})),X({limit:e,page:1})},es=e=>{X({page:e})},ea=e=>{B(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},er=e=>{W(e),O(!0)},en=()=>{X(),B([])},ei=async e=>{try{await (0,N.oL)(e),y.Am.success(`داده‌ها با موفقیت به فرمت ${e} صادر شد`)}catch(e){y.Am.error(e.message||"خطا در صادرات داده‌ها")}},ed=e=>e?(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-admin-success text-white",children:[a.jsx(i.Z,{className:"h-3 w-3 ml-1"}),"فعال"]}):(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-admin-danger text-white",children:[a.jsx(d.Z,{className:"h-3 w-3 ml-1"}),"غیرفعال"]}),el=e=>a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${{STARTER:"bg-admin-info text-white",BUSINESS:"bg-admin-warning text-white",ENTERPRISE:"bg-admin-primary text-white"}[e]||"bg-admin-bg text-admin-text"}`,children:{STARTER:"استارتر",BUSINESS:"بیزینس",ENTERPRISE:"انترپرایز"}[e]||e}),em=e=>new Intl.NumberFormat("fa-IR",{style:"currency",currency:"IRR",minimumFractionDigits:0}).format(e);return(0,a.jsxs)("div",{className:"min-h-screen bg-admin-bg",children:[a.jsx("div",{className:"bg-white border-b border-admin-border px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-admin-text",children:"مدیریت مستأجرین"}),a.jsx("p",{className:"text-admin-text-light",children:"مدیریت و نظارت بر مستأجرین پلتفرم"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 space-x-reverse",children:[(0,a.jsxs)("button",{onClick:()=>H(!V),className:`btn-admin-secondary flex items-center ${V?"bg-admin-primary text-white":""}`,children:[a.jsx(l.Z,{className:"h-4 w-4 ml-2"}),V?"مخفی کردن تحلیل":"نمایش تحلیل"]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("button",{className:"btn-admin-secondary flex items-center",children:[a.jsx(c,{className:"h-4 w-4 ml-2"}),"صادرات",a.jsx("svg",{className:"h-4 w-4 mr-2 transition-transform group-hover:rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a.jsx("div",{className:"absolute top-full left-0 mt-2 w-32 bg-white border border-admin-border rounded-admin shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:(0,a.jsxs)("div",{className:"py-2",children:[a.jsx("button",{onClick:()=>ei("csv"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"CSV"}),a.jsx("button",{onClick:()=>ei("excel"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"Excel"}),a.jsx("button",{onClick:()=>ei("pdf"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"PDF"})]})})]}),(0,a.jsxs)("button",{onClick:()=>{J(!0)},className:"btn-admin-primary flex items-center",children:[a.jsx(o,{className:"h-4 w-4 ml-2"}),"مستأجر جدید"]})]})]})}),V&&a.jsx("div",{className:"p-6",children:a.jsx(D,{})}),a.jsx(T,{tenants:t,selectedTenants:z,onSelectionChange:B,onRefresh:en}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-admin border border-admin-border p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-medium text-admin-text",children:"فیلترها و جستجو"}),a.jsx("button",{onClick:()=>F(!_),className:"text-admin-primary hover:text-admin-primary-dark text-sm",children:_?"مخفی کردن فیلترها":"نمایش فیلترها"})]}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(x.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),a.jsx("input",{type:"text",placeholder:"جستجو در نام، زیردامنه، یا ایمیل...",value:E,onChange:e=>K(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})}),(0,a.jsxs)("button",{onClick:()=>F(!_),className:"btn-admin-secondary flex items-center",children:[a.jsx(u,{className:"h-4 w-4 ml-2"}),"فیلترها"]})]}),_&&a.jsx("div",{className:"mt-4 p-4 bg-admin-bg rounded-admin",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"وضعیت"}),(0,a.jsxs)("select",{value:P,onChange:e=>Q(e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[a.jsx("option",{value:"all",children:"همه"}),a.jsx("option",{value:"active",children:"فعال"}),a.jsx("option",{value:"inactive",children:"غیرفعال"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"طرح"}),(0,a.jsxs)("select",{value:I,onChange:e=>ee(e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[a.jsx("option",{value:"all",children:"همه"}),a.jsx("option",{value:"STARTER",children:"استارتر"}),a.jsx("option",{value:"BUSINESS",children:"بیزینس"}),a.jsx("option",{value:"ENTERPRISE",children:"انترپرایز"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"تعداد در صفحه"}),(0,a.jsxs)("select",{value:S.limit,onChange:e=>et(Number(e.target.value)),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[a.jsx("option",{value:10,children:"۱۰"}),a.jsx("option",{value:25,children:"۲۵"}),a.jsx("option",{value:50,children:"۵۰"}),a.jsx("option",{value:100,children:"۱۰۰"})]})]})]})})]}),C?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(h.Z,{className:"h-16 w-16 text-admin-danger mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-admin-text mb-2",children:"خطا در بارگذاری داده‌ها"}),a.jsx("p",{className:"text-admin-text-light mb-4",children:C}),a.jsx("button",{onClick:()=>X(),className:"btn-admin-primary",children:"تلاش مجدد"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-admin border border-admin-border overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-admin-border",children:[a.jsx("thead",{className:"bg-admin-bg",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:a.jsx("input",{type:"checkbox",checked:z.length===t.length&&t.length>0,onChange:()=>{z.length===t.length?B([]):B(t.map(e=>e.id))},className:"h-4 w-4 text-admin-primary focus:ring-admin-primary border-admin-border rounded"})}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"مستأجر"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"طرح"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"کاربران"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"درآمد ماهانه"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"وضعیت"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"تاریخ ایجاد"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"عملیات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-admin-border",children:m?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"px-6 py-4 text-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-admin-primary mx-auto"})})}):0===t.length?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"px-6 py-8 text-center text-admin-text-muted",children:"هیچ مستأجری یافت نشد"})}):t.map(t=>(0,a.jsxs)("tr",{className:"hover:bg-admin-bg transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("input",{type:"checkbox",checked:z.includes(t.id),onChange:()=>ea(t.id),className:"h-4 w-4 text-admin-primary focus:ring-admin-primary border-admin-border rounded"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx("div",{className:"h-10 w-10 rounded-full bg-admin-primary flex items-center justify-center",children:a.jsx(p.Z,{className:"h-5 w-5 text-white"})})}),(0,a.jsxs)("div",{className:"mr-4",children:[a.jsx("div",{className:"text-sm font-medium text-admin-text",children:t.displayName||t.name}),(0,a.jsxs)("div",{className:"text-sm text-admin-text-light",children:[t.subdomain,".servaan.com"]}),a.jsx("div",{className:"text-xs text-admin-text-muted",children:t.businessType||"نامشخص"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:el(t.plan)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center text-sm text-admin-text",children:[a.jsx(b.Z,{className:"h-4 w-4 ml-1 text-admin-text-muted"}),t.userCount||0]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center text-sm text-admin-text",children:[a.jsx(g.Z,{className:"h-4 w-4 ml-1 text-admin-text-muted"}),em(t.monthlyRevenue||t.metrics?.revenue||0)]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ed(t.isActive||"ACTIVE"===t.status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-admin-text-muted",children:(0,w.cp)(t.createdAt,{format:"short"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx("button",{onClick:s=>{s.stopPropagation(),e.push(`/admin/tenants/${t.id}`)},className:"text-admin-primary hover:text-admin-primary-dark",title:"مشاهده جزئیات",children:a.jsx(j.Z,{className:"h-4 w-4"})}),a.jsx("button",{onClick:e=>{e.stopPropagation(),er(t)},className:"text-admin-warning hover:text-admin-warning-dark",title:"ویرایش",children:a.jsx(v.Z,{className:"h-4 w-4"})}),a.jsx("button",{onClick:e=>{e.stopPropagation()},className:"text-admin-text-muted hover:text-admin-text",title:"عملیات بیشتر",children:a.jsx(f,{className:"h-4 w-4"})})]})})]},t.id))})]})})}),S.pages>1&&(0,a.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-admin-text-muted",children:["نمایش ",(S.page-1)*S.limit+1," تا ",Math.min(S.page*S.limit,S.total)," از ",S.total," نتیجه"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx("button",{onClick:()=>es(S.page-1),disabled:1===S.page,className:"px-3 py-2 text-sm font-medium text-admin-text bg-white border border-admin-border rounded-admin hover:bg-admin-bg disabled:opacity-50 disabled:cursor-not-allowed",children:"قبلی"}),Array.from({length:Math.min(5,S.pages)},(e,t)=>{let s=t+1;return a.jsx("button",{onClick:()=>es(s),className:`px-3 py-2 text-sm font-medium rounded-admin ${s===S.page?"bg-admin-primary text-white":"text-admin-text bg-white border border-admin-border hover:bg-admin-bg"}`,children:s},s)}),a.jsx("button",{onClick:()=>es(S.page+1),disabled:S.page===S.pages,className:"px-3 py-2 text-sm font-medium text-admin-text bg-white border border-admin-border rounded-admin hover:bg-admin-bg disabled:opacity-50 disabled:cursor-not-allowed",children:"بعدی"})]})]})]})]}),a.jsx(Z,{tenant:U,isOpen:G,onClose:()=>{O(!1),W(null)},onSave:e=>{let t={id:e.id,name:e.name,displayName:e.displayName,subdomain:e.subdomain,description:e.description,businessType:e.businessType,city:e.city,country:e.country,status:"ACTIVE",plan:e.plan,isActive:e.isActive,ownerName:e.ownerName,ownerEmail:e.ownerEmail,ownerPhone:e.ownerPhone,createdAt:e.createdAt,updatedAt:e.updatedAt,userCount:0,storageUsed:0,storageLimit:0,features:e.features,metrics:{userCount:0,customerCount:0,orderCount:0,revenue:0}};s(s=>s.map(s=>s.id===e.id?t:s)),y.Am.success("مستأجر با موفقیت به‌روزرسانی شد")}}),a.jsx(L,{isOpen:Y,onClose:()=>J(!1),onSuccess:()=>{en(),J(!1)}})]})})},4993:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`D:\servaan\src\admin\frontend\src\app\admin\tenants\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[410,554,718,599,20],()=>s(3358));module.exports=a})();
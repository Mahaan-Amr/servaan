(()=>{var e={};e.id=894,e.ids=[894],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},7229:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>o,pages:()=>c,routeModule:()=>u,tree:()=>m}),t(4993),t(1266),t(4514),t(5866);var a=t(3191),r=t(8716),n=t(7922),i=t.n(n),d=t(5231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);t.d(s,l);let m=["",{children:["admin",{children:["tenants",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4993)),"D:\\servaan\\src\\admin\\frontend\\src\\app\\admin\\tenants\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1266)),"D:\\servaan\\src\\admin\\frontend\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,4514)),"D:\\servaan\\src\\admin\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\servaan\\src\\admin\\frontend\\src\\app\\admin\\tenants\\page.tsx"],o="/admin/tenants/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/tenants/page",pathname:"/admin/tenants",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:m}})},9125:(e,s,t)=>{Promise.resolve().then(t.bind(t,7253))},3855:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7253:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>es});var a=t(326),r=t(7577),n=t(5047),i=t(361),d=t(9669),l=t(6754),m=t(1540),c=t(3855),o=t(949),x=t(9734),u=t(4061),h=t(1821),p=t(2714),b=t(9508),j=t(5919),g=t(381),v=t(7605),f=t(4241),y=t(4066),N=t(4019),w=t(9635),k=t(8378),C=t(165),A=t(2881);let S=(0,A.Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function E({tenant:e,isOpen:s,onClose:t,onSave:n}){let[i,d]=(0,r.useState)({}),[l,m]=(0,r.useState)(!1),[c,o]=(0,r.useState)("basic"),u=(e,s)=>{d(t=>({...t,[e]:s}))},h=e=>{d(s=>({...s,features:{hasInventoryManagement:s.features?.hasInventoryManagement??!1,hasCustomerManagement:s.features?.hasCustomerManagement??!1,hasAccountingSystem:s.features?.hasAccountingSystem??!1,hasReporting:s.features?.hasReporting??!1,hasNotifications:s.features?.hasNotifications??!1,hasAdvancedReporting:s.features?.hasAdvancedReporting??!1,hasApiAccess:s.features?.hasApiAccess??!1,hasCustomBranding:s.features?.hasCustomBranding??!1,hasMultiLocation:s.features?.hasMultiLocation??!1,hasAdvancedCRM:s.features?.hasAdvancedCRM??!1,hasWhatsappIntegration:s.features?.hasWhatsappIntegration??!1,hasInstagramIntegration:s.features?.hasInstagramIntegration??!1,hasAnalyticsBI:s.features?.hasAnalyticsBI??!1,[e]:!s.features?.[e]}}))},p=async s=>{if(s.preventDefault(),e)try{m(!0);let s=await (0,v.Jq)(e.id,i);g.Am.success("مستأجر با موفقیت به‌روزرسانی شد"),n(s),t()}catch(e){g.Am.error(e.message||"خطا در به‌روزرسانی مستأجر")}finally{m(!1)}};return s&&e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-admin shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-admin-border",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(x.Z,{className:"h-6 w-6 text-admin-primary ml-2"}),a.jsx("h2",{className:"text-xl font-bold text-admin-text",children:"ویرایش مستأجر"})]}),a.jsx("button",{onClick:t,className:"text-admin-text-muted hover:text-admin-text",children:a.jsx(N.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"flex border-b border-admin-border",children:[(0,a.jsxs)("button",{onClick:()=>o("basic"),className:`px-6 py-3 text-sm font-medium border-b-2 ${"basic"===c?"border-admin-primary text-admin-primary":"border-transparent text-admin-text-muted hover:text-admin-text"}`,children:[a.jsx(w.Z,{className:"h-4 w-4 ml-2 inline"}),"اطلاعات پایه"]}),(0,a.jsxs)("button",{onClick:()=>o("features"),className:`px-6 py-3 text-sm font-medium border-b-2 ${"features"===c?"border-admin-primary text-admin-primary":"border-transparent text-admin-text-muted hover:text-admin-text"}`,children:[a.jsx(k.Z,{className:"h-4 w-4 ml-2 inline"}),"ویژگی‌ها"]}),(0,a.jsxs)("button",{onClick:()=>o("advanced"),className:`px-6 py-3 text-sm font-medium border-b-2 ${"advanced"===c?"border-admin-primary text-admin-primary":"border-transparent text-admin-text-muted hover:text-admin-text"}`,children:[a.jsx(C.Z,{className:"h-4 w-4 ml-2 inline"}),"تنظیمات پیشرفته"]})]}),(0,a.jsxs)("form",{onSubmit:p,className:"p-6",children:["basic"===c&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام مستأجر *"}),a.jsx("input",{type:"text",value:i.name||"",onChange:e=>u("name",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام نمایشی"}),a.jsx("input",{type:"text",value:i.displayName||"",onChange:e=>u("displayName",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"ایمیل مالک *"}),a.jsx("input",{type:"email",value:i.ownerEmail||"",onChange:e=>u("ownerEmail",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام مالک"}),a.jsx("input",{type:"text",value:i.ownerName||"",onChange:e=>u("ownerName",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شماره تلفن"}),a.jsx("input",{type:"tel",value:i.ownerPhone||"",onChange:e=>u("ownerPhone",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نوع کسب و کار"}),a.jsx("input",{type:"text",value:i.businessType||"",onChange:e=>u("businessType",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شهر"}),a.jsx("input",{type:"text",value:i.city||"",onChange:e=>u("city",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"کشور *"}),a.jsx("input",{type:"text",value:i.country||"",onChange:e=>u("country",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"توضیحات"}),a.jsx("textarea",{value:i.description||"",onChange:e=>u("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]}),"features"===c&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"طرح *"}),(0,a.jsxs)("select",{value:i.plan||"",onChange:e=>u("plan",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,children:[a.jsx("option",{value:"STARTER",children:"استارتر"}),a.jsx("option",{value:"BUSINESS",children:"بیزینس"}),a.jsx("option",{value:"ENTERPRISE",children:"انترپرایز"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"وضعیت"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 space-x-reverse",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"isActive",checked:!0===i.isActive,onChange:()=>u("isActive",!0),className:"ml-2 text-admin-primary focus:ring-admin-primary"}),"فعال"]}),(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"isActive",checked:!1===i.isActive,onChange:()=>u("isActive",!1),className:"ml-2 text-admin-primary focus:ring-admin-primary"}),"غیرفعال"]})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-admin-text mb-4",children:"ویژگی‌های سیستم"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.features&&Object.entries(i.features).map(([e,s])=>(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:s,onChange:()=>h(e),className:"ml-2 text-admin-primary focus:ring-admin-primary"}),a.jsx("span",{className:"text-sm text-admin-text",children:{hasInventoryManagement:"مدیریت موجودی",hasCustomerManagement:"مدیریت مشتریان",hasAccountingSystem:"سیستم حسابداری",hasReporting:"گزارش‌گیری",hasNotifications:"اعلان‌ها",hasAdvancedReporting:"گزارش‌گیری پیشرفته",hasApiAccess:"دسترسی API",hasCustomBranding:"برندینگ سفارشی",hasMultiLocation:"چند شعبه",hasAdvancedCRM:"CRM پیشرفته",hasWhatsappIntegration:"ادغام واتساپ",hasInstagramIntegration:"ادغام اینستاگرام",hasAnalyticsBI:"تحلیل و هوش تجاری"}[e]||e})]},e))})]})]}),"advanced"===c&&a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-admin-bg p-4 rounded-admin",children:[a.jsx("h3",{className:"text-lg font-medium text-admin-text mb-4",children:"تنظیمات پیشرفته"}),a.jsx("p",{className:"text-sm text-admin-text-muted",children:"این بخش برای تنظیمات پیشرفته و دسترسی‌های خاص در نظر گرفته شده است."})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 space-x-reverse pt-6 border-t border-admin-border",children:[a.jsx("button",{type:"button",onClick:t,className:"btn-admin-secondary",disabled:l,children:"انصراف"}),a.jsx("button",{type:"submit",className:"btn-admin-primary flex items-center",disabled:l,children:l?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}),"در حال ذخیره..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(S,{className:"h-4 w-4 ml-2"}),"ذخیره تغییرات"]})})]})]})]})}):null}let M=(0,A.Z)("square-check-big",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),I=(0,A.Z)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Z=(0,A.Z)("power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),T=(0,A.Z)("power-off",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function R({tenants:e,selectedTenants:s,onSelectionChange:t,onRefresh:n,currentFilters:l}){let[c,x]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[p,b]=(0,r.useState)(null),j=s.length===e.length&&e.length>0,f=async(e,t)=>{if(0===s.length){g.Am.error("لطفاً حداقل یک مستأجر را انتخاب کنید");return}"export"===e?b({type:"export",format:t}):b({type:e}),h(!0)},y=async()=>{if(p&&0!==s.length)try{if(x(!0),"export"===p.type&&p.format)await (0,v.oL)(p.format,l,s),g.Am.success(`صادرات ${s.length} مستأجر با موفقیت انجام شد`);else if("activate"===p.type||"deactivate"===p.type){let e="activate"===p.type;await (0,v._7)(s,e);let a=e?"فعال":"غیرفعال";g.Am.success(`${s.length} مستأجر با موفقیت ${a} شد`),n(),t([])}}catch(s){let e=s instanceof Error?s.message:"خطا در انجام عملیات گروهی";g.Am.error(e)}finally{x(!1),h(!1),b(null)}};return 0===e.length?null:(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:`bg-admin-primary text-white p-4 rounded-admin transition-all duration-300 ${s.length>0?"opacity-100 translate-y-0":"opacity-0 -translate-y-full absolute"}`,children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsx("div",{className:"flex items-center",children:(0,a.jsxs)("button",{onClick:()=>{j?t([]):t(e.map(e=>e.id))},className:"flex items-center text-white hover:text-admin-bg transition-colors",children:[j?a.jsx(M,{className:"h-5 w-5 ml-2"}):a.jsx(I,{className:"h-5 w-5 ml-2"}),j?"حذف انتخاب همه":"انتخاب همه"]})}),(0,a.jsxs)("div",{className:"text-sm",children:[s.length," مستأجر انتخاب شده"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 space-x-reverse",children:[(0,a.jsxs)("button",{onClick:()=>f("activate"),disabled:c,className:"flex items-center px-3 py-2 bg-admin-success hover:bg-admin-success-dark text-white rounded-admin text-sm transition-colors disabled:opacity-50",children:[a.jsx(Z,{className:"h-4 w-4 ml-2"}),"فعال‌سازی گروهی"]}),(0,a.jsxs)("button",{onClick:()=>f("deactivate"),disabled:c,className:"flex items-center px-3 py-2 bg-admin-warning hover:bg-admin-warning-dark text-white rounded-admin text-sm transition-colors disabled:opacity-50",children:[a.jsx(T,{className:"h-4 w-4 ml-2"}),"غیرفعال‌سازی گروهی"]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("button",{disabled:c,className:"flex items-center px-3 py-2 bg-admin-info hover:bg-admin-info-dark text-white rounded-admin text-sm transition-colors disabled:opacity-50",children:[a.jsx(m.Z,{className:"h-4 w-4 ml-2"}),"صادرات",a.jsx("svg",{className:"h-4 w-4 mr-2 transition-transform group-hover:rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-white border border-admin-border rounded-admin shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:(0,a.jsxs)("div",{className:"py-2",children:[a.jsx("button",{onClick:()=>f("export","csv"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"صادرات CSV"}),a.jsx("button",{onClick:()=>f("export","excel"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"صادرات Excel"}),a.jsx("button",{onClick:()=>f("export","pdf"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"صادرات PDF"})]})})]}),a.jsx("button",{onClick:()=>t([]),className:"text-white hover:text-admin-bg transition-colors",title:"حذف انتخاب",children:a.jsx(d.Z,{className:"h-5 w-5"})})]})]})}),u&&p&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-admin shadow-xl max-w-md w-full",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:["export"===p.type?a.jsx(m.Z,{className:"h-6 w-6 text-admin-info ml-2"}):"activate"===p.type?a.jsx(i.Z,{className:"h-6 w-6 text-admin-success ml-2"}):a.jsx(o.Z,{className:"h-6 w-6 text-admin-warning ml-2"}),(0,a.jsxs)("h3",{className:"text-lg font-bold text-admin-text",children:["export"===p.type&&"تأیید صادرات","activate"===p.type&&"تأیید فعال‌سازی گروهی","deactivate"===p.type&&"تأیید غیرفعال‌سازی گروهی"]})]}),(0,a.jsxs)("p",{className:"text-admin-text mb-6",children:["export"===p.type&&`آیا می‌خواهید ${s.length} مستأجر انتخاب شده را به فرمت ${p.format?.toUpperCase()} صادر کنید؟`,"activate"===p.type&&`آیا می‌خواهید ${s.length} مستأجر انتخاب شده را فعال کنید؟`,"deactivate"===p.type&&`آیا می‌خواهید ${s.length} مستأجر انتخاب شده را غیرفعال کنید؟`]}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 space-x-reverse",children:[a.jsx("button",{onClick:()=>{h(!1),b(null)},className:"btn-admin-secondary",disabled:c,children:"انصراف"}),a.jsx("button",{onClick:y,className:`btn-admin-primary flex items-center ${"deactivate"===p.type?"bg-admin-warning hover:bg-admin-warning-dark":""}`,disabled:c,children:c?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}),"در حال انجام..."]}):(0,a.jsxs)(a.Fragment,{children:["export"===p.type&&a.jsx(m.Z,{className:"h-4 w-4 ml-2"}),"activate"===p.type&&a.jsx(i.Z,{className:"h-4 w-4 ml-2"}),"deactivate"===p.type&&a.jsx(o.Z,{className:"h-4 w-4 ml-2"}),"تأیید"]})})]})]})})})]})}var P=t(9242),$=t(6697),L=t(7069),q=t(9163);function F({className:e=""}){let[s,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0),[o,p]=(0,r.useState)(null),[b,j]=(0,r.useState)(30),[f,y]=(0,r.useState)("day"),[N,w]=(0,r.useState)("monthly"),[k,C]=(0,r.useState)(new Date().getFullYear()),A=(0,r.useCallback)(async()=>{try{c(!0),p(null);let[e,s]=await Promise.all([(0,v.bm)(b,f),(0,v.uW)(N,k)]);t(e),i(s)}catch(e){p(e instanceof Error?e.message:"خطا در بارگذاری داده‌های تحلیلی"),g.Am.error("خطا در بارگذاری داده‌های تحلیلی")}finally{c(!1)}},[b,f,N,k]),S=async e=>{try{await (0,v.oL)(e),g.Am.success(`صادرات داده‌های تحلیلی با موفقیت انجام شد`)}catch(s){let e=s instanceof Error?s.message:"خطا در صادرات داده‌ها";g.Am.error(e)}},E=e=>(0,P.xG)(e);return!d||s||n?o?a.jsx("div",{className:`bg-white rounded-admin border border-admin-border p-6 ${e}`,children:(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx($.Z,{className:"h-16 w-16 text-admin-danger mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-admin-text mb-2",children:"خطا در بارگذاری داده‌ها"}),a.jsx("p",{className:"text-admin-text-light mb-4",children:o}),a.jsx("button",{onClick:A,className:"btn-admin-primary",children:"تلاش مجدد"})]})}):(0,a.jsxs)("div",{className:`bg-white rounded-admin border border-admin-border ${e}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-admin-border",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(l.Z,{className:"h-6 w-6 text-admin-primary ml-2"}),a.jsx("h2",{className:"text-xl font-bold text-admin-text",children:"داشبورد تحلیلی مستأجرین"})]}),a.jsx("div",{className:"flex items-center space-x-3 space-x-reverse",children:(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("button",{className:"btn-admin-secondary flex items-center",children:[a.jsx(m.Z,{className:"h-4 w-4 ml-2"}),"صادرات"]}),a.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-32 bg-white border border-admin-border rounded-admin shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:(0,a.jsxs)("div",{className:"py-2",children:[a.jsx("button",{onClick:()=>S("csv"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"CSV"}),a.jsx("button",{onClick:()=>S("excel"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"Excel"}),a.jsx("button",{onClick:()=>S("pdf"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"PDF"})]})})]})})]}),a.jsx("div",{className:"p-6 border-b border-admin-border",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"دوره رشد"}),(0,a.jsxs)("select",{value:b,onChange:e=>j(Number(e.target.value)),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[a.jsx("option",{value:7,children:"۷ روز"}),a.jsx("option",{value:30,children:"۳۰ روز"}),a.jsx("option",{value:90,children:"۹۰ روز"}),a.jsx("option",{value:365,children:"یک سال"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"گروه‌بندی رشد"}),(0,a.jsxs)("select",{value:f,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[a.jsx("option",{value:"day",children:"روزانه"}),a.jsx("option",{value:"week",children:"هفتگی"}),a.jsx("option",{value:"month",children:"ماهانه"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"دوره درآمد"}),(0,a.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[a.jsx("option",{value:"daily",children:"روزانه"}),a.jsx("option",{value:"weekly",children:"هفتگی"}),a.jsx("option",{value:"monthly",children:"ماهانه"}),a.jsx("option",{value:"yearly",children:"سالانه"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"سال"}),a.jsx("select",{value:k,onChange:e=>C(Number(e.target.value)),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:Array.from({length:5},(e,s)=>new Date().getFullYear()-s).map(e=>a.jsx("option",{value:e,children:e},e))})]})]})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-gradient-to-br from-admin-primary to-admin-primary-dark text-white p-6 rounded-admin",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-admin-bg text-sm font-medium",children:"کل مستأجرین"}),a.jsx("p",{className:"text-3xl font-bold",children:s?.data?s.data.reduce((e,s)=>e+s.new_tenants,0):0})]}),a.jsx(x.Z,{className:"h-12 w-12 text-admin-bg opacity-80"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-admin-success to-admin-success-dark text-white p-6 rounded-admin",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-admin-bg text-sm font-medium",children:"مستأجرین فعال"}),a.jsx("p",{className:"text-3xl font-bold",children:s?.data?s.data.reduce((e,s)=>e+s.active_tenants,0):0})]}),a.jsx(u.Z,{className:"h-12 w-12 text-admin-bg opacity-80"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-admin-warning to-admin-warning-dark text-white p-6 rounded-admin",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-admin-bg text-sm font-medium",children:"کل درآمد"}),a.jsx("p",{className:"text-3xl font-bold",children:n?.summary.totalRevenue?E(n.summary.totalRevenue):"0"})]}),a.jsx(h.Z,{className:"h-12 w-12 text-admin-bg opacity-80"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-admin-bg p-6 rounded-admin",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-admin-text mb-4 flex items-center",children:[a.jsx(L.Z,{className:"h-5 w-5 text-admin-primary ml-2"}),"روند رشد مستأجرین"]}),s?.data&&s.data.length>0?a.jsx("div",{className:"space-y-3",children:s.data.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-admin-text",children:new Date(e.period).toLocaleDateString("fa-IR")}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 space-x-reverse",children:[(0,a.jsxs)("span",{className:"text-sm text-admin-text",children:["جدید: ",e.new_tenants]}),(0,a.jsxs)("span",{className:"text-sm text-admin-success",children:["فعال: ",e.active_tenants]})]})]},s))}):a.jsx("div",{className:"text-center py-8 text-admin-text-muted",children:"داده‌ای برای نمایش وجود ندارد"})]}),(0,a.jsxs)("div",{className:"bg-admin-bg p-6 rounded-admin",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-admin-text mb-4 flex items-center",children:[a.jsx(h.Z,{className:"h-5 w-5 text-admin-warning ml-2"}),"روند درآمد"]}),n?.data&&n.data.length>0?a.jsx("div",{className:"space-y-3",children:n.data.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-admin-text",children:e.period}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsx("span",{className:"text-sm text-admin-text",children:E(e.revenue)}),(0,a.jsxs)("span",{className:`text-sm flex items-center ${e.growth>=0?"text-admin-success":"text-admin-danger"}`,children:[e.growth>=0?a.jsx(L.Z,{className:"h-3 w-3 ml-1"}):a.jsx(q.Z,{className:"h-3 w-3 ml-1"}),Math.abs(e.growth),"%"]})]})]},s))}):a.jsx("div",{className:"text-center py-8 text-admin-text-muted",children:"داده‌ای برای نمایش وجود ندارد"})]})]}),n?.summary&&(0,a.jsxs)("div",{className:"mt-8 bg-admin-bg p-6 rounded-admin",children:[a.jsx("h3",{className:"text-lg font-medium text-admin-text mb-4",children:"خلاصه درآمد"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-admin-text-muted mb-1",children:"کل درآمد"}),a.jsx("p",{className:"text-2xl font-bold text-admin-text",children:E(n.summary.totalRevenue)})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-admin-text-muted mb-1",children:"میانگین رشد"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-admin-success",children:[n.summary.averageGrowth,"%"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-admin-text-muted mb-1",children:"بهترین ماه"}),a.jsx("p",{className:"text-2xl font-bold text-admin-primary",children:n.summary.topMonth})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-admin-text-muted mb-1",children:"بیشترین درآمد"}),a.jsx("p",{className:"text-2xl font-bold text-admin-warning",children:E(n.summary.topRevenue)})]})]})]})]})]}):a.jsx("div",{className:`bg-white rounded-admin border border-admin-border p-6 ${e}`,children:(0,a.jsxs)("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-6 bg-admin-bg rounded w-1/4 mb-4"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsx("div",{className:"h-20 bg-admin-bg rounded"}),a.jsx("div",{className:"h-20 bg-admin-bg rounded"}),a.jsx("div",{className:"h-20 bg-admin-bg rounded"})]}),a.jsx("div",{className:"h-64 bg-admin-bg rounded"})]})})}function _({isOpen:e,onClose:s,onSuccess:t}){let[n,i]=(0,r.useState)({name:"",displayName:"",subdomain:"",description:"",plan:"STARTER",ownerName:"",ownerEmail:"",ownerPhone:"",businessType:"",city:"",country:"ایران",isActive:!0}),[d,l]=(0,r.useState)(!1),m=(e,s)=>{i(t=>({...t,[e]:s}))},c=async e=>{e.preventDefault();try{l(!0),await (0,v.LS)({name:n.name,displayName:n.displayName||n.name,subdomain:n.subdomain,description:n.description,plan:n.plan,ownerName:n.ownerName,ownerEmail:n.ownerEmail,ownerPhone:n.ownerPhone,businessType:n.businessType,city:n.city,country:n.country,isActive:n.isActive}),g.Am.success("مستأجر جدید با موفقیت ایجاد شد"),t(),s(),i({name:"",displayName:"",subdomain:"",description:"",plan:"STARTER",ownerName:"",ownerEmail:"",ownerPhone:"",businessType:"",city:"",country:"ایران",isActive:!0})}catch(e){g.Am.error(e.message||"خطا در ایجاد مستأجر جدید")}finally{l(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-admin shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-admin-border",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(x.Z,{className:"h-6 w-6 text-admin-primary ml-2"}),a.jsx("h2",{className:"text-xl font-bold text-admin-text",children:"ایجاد مستأجر جدید"})]}),a.jsx("button",{onClick:s,className:"text-admin-text-muted hover:text-admin-text",children:a.jsx(N.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("form",{onSubmit:c,className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام مستأجر *"}),a.jsx("input",{type:"text",value:n.name,onChange:e=>m("name",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,placeholder:"نام مستأجر"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام نمایشی"}),a.jsx("input",{type:"text",value:n.displayName,onChange:e=>m("displayName",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"نام نمایشی"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"زیردامنه *"}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("input",{type:"text",value:n.subdomain,onChange:e=>m("subdomain",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,placeholder:"نام زیردامنه"}),a.jsx("span",{className:"mr-2 text-admin-text-muted",children:".servaan.com"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"طرح *"}),(0,a.jsxs)("select",{value:n.plan,onChange:e=>m("plan",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,children:[a.jsx("option",{value:"STARTER",children:"استارتر"}),a.jsx("option",{value:"BUSINESS",children:"بیزینس"}),a.jsx("option",{value:"ENTERPRISE",children:"انترپرایز"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام مالک *"}),a.jsx("input",{type:"text",value:n.ownerName,onChange:e=>m("ownerName",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,placeholder:"نام مالک"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"ایمیل مالک *"}),a.jsx("input",{type:"email",value:n.ownerEmail,onChange:e=>m("ownerEmail",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,placeholder:"ایمیل مالک"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شماره تلفن"}),a.jsx("input",{type:"tel",value:n.ownerPhone,onChange:e=>m("ownerPhone",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"شماره تلفن"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نوع کسب و کار"}),a.jsx("input",{type:"text",value:n.businessType,onChange:e=>m("businessType",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"نوع کسب و کار"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شهر"}),a.jsx("input",{type:"text",value:n.city,onChange:e=>m("city",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"شهر"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"کشور"}),a.jsx("input",{type:"text",value:n.country,onChange:e=>m("country",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"کشور"})]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"توضیحات"}),a.jsx("textarea",{value:n.description,onChange:e=>m("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"توضیحات مستأجر"})]}),a.jsx("div",{className:"mt-6",children:(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:n.isActive,onChange:e=>m("isActive",e.target.checked),className:"ml-2 text-admin-primary focus:ring-admin-primary"}),a.jsx("span",{className:"text-sm text-admin-text",children:"مستأجر فعال باشد"})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 space-x-reverse pt-6 border-t border-admin-border",children:[a.jsx("button",{type:"button",onClick:s,className:"btn-admin-secondary",disabled:d,children:"انصراف"}),a.jsx("button",{type:"submit",className:"btn-admin-primary flex items-center",disabled:d,children:d?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}),"در حال ایجاد..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(S,{className:"h-4 w-4 ml-2"}),"ایجاد مستأجر"]})})]})]})]})}):null}var B=t(7636);let O=(0,A.Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),V=(0,A.Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),D=(0,A.Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),U=(0,A.Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),z={name:"",displayName:"",subdomain:"",description:"",ownerName:"",ownerEmail:"",ownerPhone:"",businessType:"",city:"",country:"ایران",plan:"STARTER",features:{hasInventoryManagement:!1,hasCustomerManagement:!1,hasAccountingSystem:!1,hasReporting:!1,hasNotifications:!0,hasAdvancedReporting:!1,hasApiAccess:!1,hasCustomBranding:!1,hasMultiLocation:!1,hasAdvancedCRM:!1,hasWhatsappIntegration:!1,hasInstagramIntegration:!1,hasAnalyticsBI:!1},isActive:!0},W=[{id:"basic",title:"اطلاعات پایه",description:"نام و زیردامنه مستأجر",icon:x.Z},{id:"owner",title:"اطلاعات مالک",description:"اطلاعات تماس مالک",icon:w.Z},{id:"business",title:"اطلاعات کسب‌وکار",description:"نوع و موقعیت کسب‌وکار",icon:B.Z},{id:"plan",title:"طرح و ویژگی‌ها",description:"انتخاب طرح و ویژگی‌ها",icon:k.Z},{id:"preview",title:"بررسی نهایی",description:"بررسی و تأیید اطلاعات",icon:p.Z}],Y=["رستوران","کافه","فست فود","سوپرمارکت","فروشگاه","هتل","سالن زیبایی","کلینیک","آموزشگاه","سایر"],G=["تهران","مشهد","اصفهان","شیراز","تبریز","کرج","اهواز","قم","کرمانشاه","ارومیه","زاهدان","رشت","کرمان","همدان","یزد","اردبیل","بندرعباس","کاشان","ساری","سایر"],H={STARTER:{name:"استارتر",price:"رایگان",description:"مناسب برای کسب‌وکارهای کوچک",features:["مدیریت موجودی","مدیریت مشتریان","گزارش‌گیری پایه","اعلان‌ها"],maxUsers:5,maxItems:1e3,maxCustomers:500},BUSINESS:{name:"بیزینس",price:"۲۹۹,۰۰۰ تومان/ماه",description:"مناسب برای کسب‌وکارهای متوسط",features:["همه ویژگی‌های استارتر","سیستم حسابداری","گزارش‌گیری پیشرفته","دسترسی API","برندسازی سفارشی"],maxUsers:20,maxItems:5e3,maxCustomers:2e3},ENTERPRISE:{name:"انترپرایز",price:"۹۹۹,۰۰۰ تومان/ماه",description:"مناسب برای کسب‌وکارهای بزرگ",features:["همه ویژگی‌های بیزینس","چند شعبه","CRM پیشرفته","اتصال واتساپ","اتصال اینستاگرام","تحلیل داده"],maxUsers:100,maxItems:5e4,maxCustomers:1e4}};function X({isOpen:e,onClose:s,onSuccess:t}){let[n,d]=(0,r.useState)(0),[l,m]=(0,r.useState)(z),[c,o]=(0,r.useState)(!1),[x,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[b,j]=(0,r.useState)({}),f=(e,s)=>{m(t=>({...t,[e]:s})),b[e]&&j(s=>({...s,[e]:""}))},y=(e,s)=>{m(t=>({...t,features:{...t.features,[e]:s}}))},w=e=>{let s={};switch(e){case 0:l.name.trim()||(s.name="نام مستأجر الزامی است"),l.displayName.trim()||(s.displayName="نام نمایشی الزامی است"),l.subdomain.trim()?l.subdomain.length<3?s.subdomain="زیردامنه باید حداقل ۳ کاراکتر باشد":/^[a-zA-Z0-9-]+$/.test(l.subdomain)?!1===h&&(s.subdomain="این زیردامنه قبلاً استفاده شده است"):s.subdomain="زیردامنه فقط می‌تواند شامل حروف، اعداد و خط تیره باشد":s.subdomain="زیردامنه الزامی است";break;case 1:l.ownerName.trim()||(s.ownerName="نام مالک الزامی است"),l.ownerEmail.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.ownerEmail)||(s.ownerEmail="ایمیل معتبر نیست"):s.ownerEmail="ایمیل مالک الزامی است";break;case 2:l.businessType.trim()||(s.businessType="نوع کسب‌وکار الزامی است"),l.city.trim()||(s.city="شهر الزامی است")}return j(s),0===Object.keys(s).length},k=async()=>{if(w(n)){o(!0);try{let e={name:l.name,displayName:l.displayName,subdomain:l.subdomain,description:l.description,plan:l.plan,ownerName:l.ownerName,ownerEmail:l.ownerEmail,ownerPhone:l.ownerPhone,businessType:l.businessType,city:l.city,country:l.country,isActive:l.isActive,features:l.features};await (0,v.LS)(e),g.ZP.success("مستأجر با موفقیت ایجاد شد"),t(),s()}catch(e){g.ZP.error(e.message||"خطا در ایجاد مستأجر")}finally{o(!1)}}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-admin w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"border-b border-admin-border p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-admin-text",children:"ایجاد مستأجر جدید"}),(0,a.jsxs)("p",{className:"text-admin-text-muted",children:["مرحله ",n+1," از ",W.length]})]}),a.jsx("button",{onClick:s,className:"text-admin-text-muted hover:text-admin-text",children:a.jsx(N.Z,{className:"h-6 w-6"})})]}),a.jsx("div",{className:"mt-6",children:a.jsx("div",{className:"flex items-center justify-between",children:W.map((e,s)=>{let t=e.icon,r=s===n,i=s<n;return(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${r?"border-admin-primary bg-admin-primary text-white":i?"border-green-500 bg-green-500 text-white":"border-admin-border bg-white text-admin-text-muted"}`,children:i?a.jsx(V,{className:"h-5 w-5"}):a.jsx(t,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"mr-3 text-right",children:[a.jsx("p",{className:`text-sm font-medium ${r?"text-admin-primary":"text-admin-text-muted"}`,children:e.title}),a.jsx("p",{className:"text-xs text-admin-text-muted",children:e.description})]}),s<W.length-1&&a.jsx(D,{className:"h-4 w-4 text-admin-text-muted mx-4"})]},e.id)})})})]}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:(()=>{switch(n){case 0:return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام مستأجر *"}),a.jsx("input",{type:"text",value:l.name,onChange:e=>f("name",e.target.value),className:`w-full px-3 py-2 border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent ${b.name?"border-red-500":"border-admin-border"}`,placeholder:"نام کسب‌وکار"}),b.name&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.name})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام نمایشی *"}),a.jsx("input",{type:"text",value:l.displayName,onChange:e=>f("displayName",e.target.value),className:`w-full px-3 py-2 border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent ${b.displayName?"border-red-500":"border-admin-border"}`,placeholder:"نام نمایشی در پنل"}),b.displayName&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.displayName})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"زیردامنه *"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{type:"text",value:l.subdomain,onChange:e=>f("subdomain",e.target.value.toLowerCase()),className:`w-full px-3 py-2 pr-20 border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent ${b.subdomain?"border-red-500":"border-admin-border"}`,placeholder:"subdomain"}),a.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-sm text-admin-text-muted",children:".servaan.com"}),x&&a.jsx("div",{className:"absolute left-12 top-1/2 transform -translate-y-1/2",children:a.jsx(O,{className:"h-4 w-4 animate-spin text-admin-primary"})}),!x&&null!==h&&a.jsx("div",{className:"absolute left-12 top-1/2 transform -translate-y-1/2",children:h?a.jsx(i.Z,{className:"h-4 w-4 text-green-500"}):a.jsx(N.Z,{className:"h-4 w-4 text-red-500"})})]}),b.subdomain&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.subdomain}),!0===h&&a.jsx("p",{className:"text-green-500 text-sm mt-1",children:"این زیردامنه در دسترس است"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"توضیحات"}),a.jsx("textarea",{value:l.description,onChange:e=>f("description",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",rows:3,placeholder:"توضیحات کوتاه درباره کسب‌وکار"})]})]});case 1:return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام مالک *"}),a.jsx("input",{type:"text",value:l.ownerName,onChange:e=>f("ownerName",e.target.value),className:`w-full px-3 py-2 border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent ${b.ownerName?"border-red-500":"border-admin-border"}`,placeholder:"نام کامل مالک"}),b.ownerName&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.ownerName})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"ایمیل مالک *"}),a.jsx("input",{type:"email",value:l.ownerEmail,onChange:e=>f("ownerEmail",e.target.value),className:`w-full px-3 py-2 border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent ${b.ownerEmail?"border-red-500":"border-admin-border"}`,placeholder:"owner@example.com"}),b.ownerEmail&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.ownerEmail})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شماره تماس"}),a.jsx("input",{type:"tel",value:l.ownerPhone,onChange:e=>f("ownerPhone",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"09123456789"})]})]});case 2:return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نوع کسب‌وکار *"}),(0,a.jsxs)("select",{value:l.businessType,onChange:e=>f("businessType",e.target.value),className:`w-full px-3 py-2 border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent ${b.businessType?"border-red-500":"border-admin-border"}`,children:[a.jsx("option",{value:"",children:"انتخاب کنید"}),Y.map(e=>a.jsx("option",{value:e,children:e},e))]}),b.businessType&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.businessType})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شهر *"}),(0,a.jsxs)("select",{value:l.city,onChange:e=>f("city",e.target.value),className:`w-full px-3 py-2 border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent ${b.city?"border-red-500":"border-admin-border"}`,children:[a.jsx("option",{value:"",children:"انتخاب کنید"}),G.map(e=>a.jsx("option",{value:e,children:e},e))]}),b.city&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:b.city})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"کشور"}),(0,a.jsxs)("select",{value:l.country,onChange:e=>f("country",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[a.jsx("option",{value:"ایران",children:"ایران"}),a.jsx("option",{value:"ترکیه",children:"ترکیه"}),a.jsx("option",{value:"امارات",children:"امارات"}),a.jsx("option",{value:"سایر",children:"سایر"})]})]})]});case 3:return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-4",children:"انتخاب طرح"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(H).map(([e,s])=>(0,a.jsxs)("div",{className:`border-2 rounded-admin p-4 cursor-pointer transition-all ${l.plan===e?"border-admin-primary bg-admin-primary bg-opacity-10":"border-admin-border hover:border-admin-primary"}`,onClick:()=>f("plan",e),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"font-medium text-admin-text",children:s.name}),l.plan===e&&a.jsx(V,{className:"h-5 w-5 text-admin-primary"})]}),a.jsx("p",{className:"text-lg font-bold text-admin-primary mb-2",children:s.price}),a.jsx("p",{className:"text-sm text-admin-text-muted mb-3",children:s.description}),a.jsx("ul",{className:"text-sm text-admin-text space-y-1",children:s.features.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-center",children:[a.jsx(V,{className:"h-3 w-3 text-green-500 ml-1"}),e]},s))}),(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-admin-border text-xs text-admin-text-muted",children:[(0,a.jsxs)("p",{children:["حداکثر کاربران: ",s.maxUsers]}),(0,a.jsxs)("p",{children:["حداکثر آیتم: ",s.maxItems.toLocaleString()]}),(0,a.jsxs)("p",{children:["حداکثر مشتری: ",s.maxCustomers.toLocaleString()]})]})]},e))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-4",children:"ویژگی‌های اضافی"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{key:"hasInventoryManagement",label:"مدیریت موجودی پیشرفته",description:"مدیریت کامل موجودی و انبار"},{key:"hasCustomerManagement",label:"مدیریت مشتریان",description:"سیستم CRM برای مدیریت مشتریان"},{key:"hasAccountingSystem",label:"سیستم حسابداری",description:"حسابداری کامل و گزارش‌های مالی"},{key:"hasReporting",label:"گزارش‌گیری پایه",description:"گزارش‌های ساده و کاربردی"},{key:"hasAdvancedReporting",label:"گزارش‌گیری پیشرفته",description:"گزارش‌های تحلیلی و نمودارها"},{key:"hasApiAccess",label:"دسترسی API",description:"دسترسی به API برای توسعه"},{key:"hasCustomBranding",label:"برندسازی سفارشی",description:"لوگو و رنگ‌بندی سفارشی"},{key:"hasMultiLocation",label:"چند شعبه",description:"مدیریت چندین شعبه"},{key:"hasAdvancedCRM",label:"CRM پیشرفته",description:"سیستم CRM حرفه‌ای"},{key:"hasWhatsappIntegration",label:"اتصال واتساپ",description:"ارسال پیام از طریق واتساپ"},{key:"hasInstagramIntegration",label:"اتصال اینستاگرام",description:"مدیریت پست‌های اینستاگرام"},{key:"hasAnalyticsBI",label:"تحلیل داده",description:"ابزارهای تحلیل و هوش تجاری"}].map(e=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 space-x-reverse",children:[a.jsx("input",{type:"checkbox",checked:l.features[e.key],onChange:s=>y(e.key,s.target.checked),className:"h-4 w-4 text-admin-primary focus:ring-admin-primary border-admin-border rounded mt-1"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("label",{className:"text-sm font-medium text-admin-text",children:e.label}),a.jsx("p",{className:"text-xs text-admin-text-muted",children:e.description})]})]},e.key))})]})]});case 4:return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-admin-bg rounded-admin p-4",children:[a.jsx("h3",{className:"font-medium text-admin-text mb-4",children:"خلاصه اطلاعات"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-admin-text mb-2",children:"اطلاعات پایه"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("p",{children:[a.jsx("span",{className:"text-admin-text-muted",children:"نام:"})," ",l.name]}),(0,a.jsxs)("p",{children:[a.jsx("span",{className:"text-admin-text-muted",children:"نام نمایشی:"})," ",l.displayName]}),(0,a.jsxs)("p",{children:[a.jsx("span",{className:"text-admin-text-muted",children:"زیردامنه:"})," ",l.subdomain,".servaan.com"]}),l.description&&(0,a.jsxs)("p",{children:[a.jsx("span",{className:"text-admin-text-muted",children:"توضیحات:"})," ",l.description]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-admin-text mb-2",children:"اطلاعات مالک"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("p",{children:[a.jsx("span",{className:"text-admin-text-muted",children:"نام:"})," ",l.ownerName]}),(0,a.jsxs)("p",{children:[a.jsx("span",{className:"text-admin-text-muted",children:"ایمیل:"})," ",l.ownerEmail]}),l.ownerPhone&&(0,a.jsxs)("p",{children:[a.jsx("span",{className:"text-admin-text-muted",children:"تلفن:"})," ",l.ownerPhone]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-admin-text mb-2",children:"اطلاعات کسب‌وکار"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("p",{children:[a.jsx("span",{className:"text-admin-text-muted",children:"نوع:"})," ",l.businessType]}),(0,a.jsxs)("p",{children:[a.jsx("span",{className:"text-admin-text-muted",children:"شهر:"})," ",l.city]}),(0,a.jsxs)("p",{children:[a.jsx("span",{className:"text-admin-text-muted",children:"کشور:"})," ",l.country]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-medium text-admin-text mb-2",children:"طرح و ویژگی‌ها"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("p",{children:[a.jsx("span",{className:"text-admin-text-muted",children:"طرح:"})," ",H[l.plan].name]}),(0,a.jsxs)("p",{children:[a.jsx("span",{className:"text-admin-text-muted",children:"قیمت:"})," ",H[l.plan].price]}),(0,a.jsxs)("p",{children:[a.jsx("span",{className:"text-admin-text-muted",children:"وضعیت:"})," ",l.isActive?"فعال":"غیرفعال"]})]})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium text-admin-text mb-2",children:"ویژگی‌های فعال"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(l.features).filter(([e,s])=>s).map(([e,s])=>{let t=[{key:"hasInventoryManagement",label:"مدیریت موجودی"},{key:"hasCustomerManagement",label:"مدیریت مشتریان"},{key:"hasAccountingSystem",label:"سیستم حسابداری"},{key:"hasReporting",label:"گزارش‌گیری"},{key:"hasAdvancedReporting",label:"گزارش‌گیری پیشرفته"},{key:"hasApiAccess",label:"دسترسی API"},{key:"hasCustomBranding",label:"برندسازی سفارشی"},{key:"hasMultiLocation",label:"چند شعبه"},{key:"hasAdvancedCRM",label:"CRM پیشرفته"},{key:"hasWhatsappIntegration",label:"اتصال واتساپ"},{key:"hasInstagramIntegration",label:"اتصال اینستاگرام"},{key:"hasAnalyticsBI",label:"تحلیل داده"}].find(s=>s.key===e);return(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-admin-primary text-white",children:[a.jsx(V,{className:"h-3 w-3 ml-1"}),t?.label]},e)})})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx("input",{type:"checkbox",id:"confirm",className:"h-4 w-4 text-admin-primary focus:ring-admin-primary border-admin-border rounded"}),a.jsx("label",{htmlFor:"confirm",className:"text-sm text-admin-text",children:"تأیید می‌کنم که اطلاعات وارد شده صحیح است و مستأجر با این تنظیمات ایجاد شود"})]})]});default:return null}})()}),a.jsx("div",{className:"border-t border-admin-border p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("button",{onClick:()=>{d(e=>Math.max(e-1,0))},disabled:0===n,className:"btn-admin-secondary flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(U,{className:"h-4 w-4 ml-2"}),"قبلی"]}),a.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:n===W.length-1?(0,a.jsxs)("button",{onClick:k,disabled:c,className:"btn-admin-primary flex items-center",children:[c?a.jsx(O,{className:"h-4 w-4 ml-2 animate-spin"}):a.jsx(V,{className:"h-4 w-4 ml-2"}),"ایجاد مستأجر"]}):(0,a.jsxs)("button",{onClick:()=>{w(n)&&d(e=>Math.min(e+1,W.length-1))},className:"btn-admin-primary flex items-center",children:["بعدی",a.jsx(D,{className:"h-4 w-4 mr-2"})]})})]})})]})}):null}let J=(0,A.Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var K=t(8307),Q=t(7358);function ee({onFiltersChange:e,onClearFilters:s,initialFilters:t={}}){let[n,i]=(0,r.useState)(!1),[d,l]=(0,r.useState)(t),[m,c]=(0,r.useState)([]),[o,x]=(0,r.useState)(!1),[p,b]=(0,r.useState)(""),j=(e,s)=>{l(t=>({...t,[e]:s||void 0}))},v=e=>{l(e.filters),g.ZP.success(`جستجوی "${e.name}" بارگذاری شد`)},f=e=>{let s=m.filter(s=>s.id!==e);c(s),localStorage.setItem("tenant-saved-searches",JSON.stringify(s)),g.ZP.success("جستجوی ذخیره شده حذف شد")},y=e=>e?new Date(e).toISOString().split("T")[0]:"";return(0,a.jsxs)("div",{className:"bg-white rounded-admin border border-admin-border p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-medium text-admin-text",children:"جستجو و فیلتر پیشرفته"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[(0,a.jsxs)("button",{onClick:()=>i(!n),className:"btn-admin-secondary flex items-center",children:[a.jsx(J,{className:"h-4 w-4 ml-2"}),n?"مخفی کردن فیلترها":"نمایش فیلترها"]}),Object.keys(d).length>0&&(0,a.jsxs)("button",{onClick:()=>{l({}),s(),g.ZP.success("فیلترها پاک شدند")},className:"btn-admin-danger flex items-center",children:[a.jsx(N.Z,{className:"h-4 w-4 ml-2"}),"پاک کردن فیلترها"]})]})]}),a.jsx("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(K.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),a.jsx("input",{type:"text",placeholder:"جستجو در نام، زیردامنه، ایمیل، شهر، کشور...",value:d.search||"",onChange:e=>j("search",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})}),m.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-admin-text",children:"جستجوهای ذخیره شده"}),(0,a.jsxs)("button",{onClick:()=>x(!0),className:"text-admin-primary hover:text-admin-primary-dark text-sm flex items-center",children:[a.jsx(S,{className:"h-3 w-3 ml-1"}),"ذخیره جستجو"]})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(e=>(0,a.jsxs)("div",{className:"flex items-center bg-admin-bg rounded-admin px-3 py-1",children:[a.jsx("button",{onClick:()=>v(e),className:"text-sm text-admin-text hover:text-admin-primary mr-2",children:e.name}),a.jsx("button",{onClick:()=>f(e.id),className:"text-admin-danger hover:text-admin-danger-dark",children:a.jsx(N.Z,{className:"h-3 w-3"})})]},e.id))})]}),n&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"وضعیت"}),(0,a.jsxs)("select",{value:d.status||"all",onChange:e=>j("status","all"===e.target.value?void 0:e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[a.jsx("option",{value:"all",children:"همه"}),a.jsx("option",{value:"active",children:"فعال"}),a.jsx("option",{value:"inactive",children:"غیرفعال"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"طرح"}),(0,a.jsxs)("select",{value:d.plan||"all",onChange:e=>j("plan","all"===e.target.value?void 0:e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[a.jsx("option",{value:"all",children:"همه"}),a.jsx("option",{value:"STARTER",children:"استارتر"}),a.jsx("option",{value:"BUSINESS",children:"بیزینس"}),a.jsx("option",{value:"ENTERPRISE",children:"انترپرایز"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نوع کسب‌وکار"}),(0,a.jsxs)("select",{value:d.businessType||"all",onChange:e=>j("businessType","all"===e.target.value?void 0:e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[a.jsx("option",{value:"all",children:"همه"}),a.jsx("option",{value:"رستوران",children:"رستوران"}),a.jsx("option",{value:"کافه",children:"کافه"}),a.jsx("option",{value:"فست فود",children:"فست فود"}),a.jsx("option",{value:"سوپرمارکت",children:"سوپرمارکت"}),a.jsx("option",{value:"فروشگاه",children:"فروشگاه"}),a.jsx("option",{value:"سایر",children:"سایر"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شهر"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(B.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),a.jsx("input",{type:"text",placeholder:"نام شهر",value:d.city||"",onChange:e=>j("city",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"کشور"}),(0,a.jsxs)("select",{value:d.country||"all",onChange:e=>j("country","all"===e.target.value?void 0:e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[a.jsx("option",{value:"all",children:"همه"}),a.jsx("option",{value:"ایران",children:"ایران"}),a.jsx("option",{value:"ترکیه",children:"ترکیه"}),a.jsx("option",{value:"امارات",children:"امارات"}),a.jsx("option",{value:"سایر",children:"سایر"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"تاریخ ایجاد از"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(Q.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),a.jsx("input",{type:"date",value:y(d.createdFrom),onChange:e=>j("createdFrom",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"تاریخ ایجاد تا"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(Q.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),a.jsx("input",{type:"date",value:y(d.createdTo),onChange:e=>j("createdTo",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"درآمد ماهانه از (ریال)"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(h.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),a.jsx("input",{type:"number",placeholder:"حداقل درآمد",value:d.revenueFrom||"",onChange:e=>j("revenueFrom",e.target.value?Number(e.target.value):void 0),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"درآمد ماهانه تا (ریال)"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(h.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),a.jsx("input",{type:"number",placeholder:"حداکثر درآمد",value:d.revenueTo||"",onChange:e=>j("revenueTo",e.target.value?Number(e.target.value):void 0),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"تعداد کاربران از"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(u.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),a.jsx("input",{type:"number",placeholder:"حداقل کاربران",value:d.userCountFrom||"",onChange:e=>j("userCountFrom",e.target.value?Number(e.target.value):void 0),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"تعداد کاربران تا"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(u.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),a.jsx("input",{type:"number",placeholder:"حداکثر کاربران",value:d.userCountTo||"",onChange:e=>j("userCountTo",e.target.value?Number(e.target.value):void 0),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"ویژگی‌های فعال"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:[{key:"hasInventoryManagement",label:"مدیریت موجودی"},{key:"hasCustomerManagement",label:"مدیریت مشتریان"},{key:"hasAccountingSystem",label:"سیستم حسابداری"},{key:"hasReporting",label:"گزارش‌گیری"},{key:"hasNotifications",label:"اعلان‌ها"},{key:"hasAdvancedReporting",label:"گزارش‌گیری پیشرفته"},{key:"hasApiAccess",label:"دسترسی API"},{key:"hasCustomBranding",label:"برندسازی سفارشی"},{key:"hasMultiLocation",label:"چند شعبه"},{key:"hasAdvancedCRM",label:"CRM پیشرفته"},{key:"hasWhatsappIntegration",label:"اتصال واتساپ"},{key:"hasInstagramIntegration",label:"اتصال اینستاگرام"},{key:"hasAnalyticsBI",label:"تحلیل داده"}].map(e=>(0,a.jsxs)("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:d.hasFeatures?.includes(e.key)||!1,onChange:s=>{let t=d.hasFeatures||[],a=s.target.checked?[...t,e.key]:t.filter(s=>s!==e.key);j("hasFeatures",a.length>0?a:void 0)},className:"h-4 w-4 text-admin-primary focus:ring-admin-primary border-admin-border rounded"}),a.jsx("span",{className:"mr-2 text-sm text-admin-text",children:e.label})]},e.key))})]})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-admin p-6 w-96",children:[a.jsx("h3",{className:"text-lg font-medium text-admin-text mb-4",children:"ذخیره جستجو"}),a.jsx("input",{type:"text",placeholder:"نام جستجو",value:p,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent mb-4"}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-2 space-x-reverse",children:[a.jsx("button",{onClick:()=>x(!1),className:"btn-admin-secondary",children:"انصراف"}),a.jsx("button",{onClick:()=>{if(!p.trim()){g.ZP.error("لطفاً نام جستجو را وارد کنید");return}let e=[...m,{id:Date.now().toString(),name:p,filters:{...d},createdAt:new Date}];c(e),localStorage.setItem("tenant-saved-searches",JSON.stringify(e)),x(!1),b(""),g.ZP.success("جستجو ذخیره شد")},className:"btn-admin-primary",children:"ذخیره"})]})]})})]})}let es=(0,y.c2)(function(){let e=(0,n.useRouter)(),[s,t]=(0,r.useState)([]),[y,N]=(0,r.useState)(!0),[w,k]=(0,r.useState)(null),[C,A]=(0,r.useState)({page:1,limit:10,total:0,pages:0}),[S,M]=(0,r.useState)({}),[I,Z]=(0,r.useState)([]),[T,P]=(0,r.useState)(!1),[$,L]=(0,r.useState)(null),[q,B]=(0,r.useState)(!1),[O,V]=(0,r.useState)(!1),[D,U]=(0,r.useState)(!1),[z,W]=(0,r.useState)(null),Y=async(e={})=>{try{N(!0),k(null);let s={page:e.page||C.page,limit:e.limit||C.limit,...e},a=await (0,v.ax)(s);t(a.tenants),A(a.pagination)}catch(s){let e=s instanceof Error?s.message:"خطا در بارگذاری داده‌ها";k(e),g.Am.error(e)}finally{N(!1)}},G=(0,r.useCallback)(e=>{M({...S,...e})},[S]),H=(0,r.useCallback)(()=>{M({})},[]),J=e=>{Y({page:e})},K=e=>{Z(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},Q=e=>{L(e),B(!0)},es=async e=>{let a=!(e.isActive||"ACTIVE"===e.status),r=e.id;W(r),t(e=>e.map(e=>e.id===r?{...e,isActive:a,status:a?"ACTIVE":"INACTIVE"}:e));try{a?(await (0,v.VY)(r),g.Am.success("مستأجر فعال شد")):(await (0,v.Yn)(r),g.Am.success("مستأجر غیرفعال شد"))}catch(a){t(s);let e=a instanceof Error?a.message:"خطا در تغییر وضعیت مستأجر";g.Am.error(e)}finally{W(null)}},et=()=>{Y(),Z([])},ea=async e=>{try{await (0,v.oL)(e),g.Am.success(`داده‌ها با موفقیت به فرمت ${e} صادر شد`)}catch(s){let e=s instanceof Error?s.message:"خطا در صادرات داده‌ها";g.Am.error(e)}},er=e=>e?(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-admin-success text-white",children:[a.jsx(i.Z,{className:"h-3 w-3 ml-1"}),"فعال"]}):(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-admin-danger text-white",children:[a.jsx(d.Z,{className:"h-3 w-3 ml-1"}),"غیرفعال"]}),en=e=>a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${{STARTER:"bg-admin-info text-white",BUSINESS:"bg-admin-warning text-white",ENTERPRISE:"bg-admin-primary text-white"}[e]||"bg-admin-bg text-admin-text"}`,children:{STARTER:"استارتر",BUSINESS:"بیزینس",ENTERPRISE:"انترپرایز"}[e]||e}),ei=e=>`${Math.floor((e||0)/10).toLocaleString("fa-IR")} تومان`;return(0,a.jsxs)("div",{className:"min-h-screen bg-admin-bg",children:[a.jsx("div",{className:"bg-white border-b border-admin-border px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-admin-text",children:"مدیریت مستأجرین"}),a.jsx("p",{className:"text-admin-text-light",children:"مدیریت و نظارت بر مستأجرین پلتفرم"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 space-x-reverse",children:[(0,a.jsxs)("button",{onClick:()=>P(!T),className:`btn-admin-secondary flex items-center ${T?"bg-admin-primary text-white":""}`,children:[a.jsx(l.Z,{className:"h-4 w-4 ml-2"}),T?"مخفی کردن تحلیل":"نمایش تحلیل"]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("button",{className:"btn-admin-secondary flex items-center",children:[a.jsx(m.Z,{className:"h-4 w-4 ml-2"}),"صادرات",a.jsx("svg",{className:"h-4 w-4 mr-2 transition-transform group-hover:rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a.jsx("div",{className:"absolute top-full left-0 mt-2 w-32 bg-white border border-admin-border rounded-admin shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:(0,a.jsxs)("div",{className:"py-2",children:[a.jsx("button",{onClick:()=>ea("csv"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"CSV"}),a.jsx("button",{onClick:()=>ea("excel"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"Excel"}),a.jsx("button",{onClick:()=>ea("pdf"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"PDF"})]})})]}),(0,a.jsxs)("button",{onClick:()=>{U(!0)},className:"btn-admin-primary flex items-center",children:[a.jsx(c.Z,{className:"h-4 w-4 ml-2"}),"مستأجر جدید"]}),a.jsx("button",{onClick:()=>Y({sortBy:"monthlyRevenue",sortDir:"desc",page:1}),className:"btn-admin-secondary",children:"مرتب‌سازی بر اساس درآمد ماه"}),a.jsx("button",{onClick:()=>Y({sortBy:"ordersThisMonth",sortDir:"desc",page:1}),className:"btn-admin-secondary",children:"مرتب‌سازی بر اساس سفارشات ماه"}),a.jsx("button",{onClick:()=>Y({refresh:!0}),className:"btn-admin-secondary",children:"بروزرسانی (بدون کش)"})]})]})}),T&&a.jsx("div",{className:"p-6",children:a.jsx(F,{})}),a.jsx(R,{tenants:s,selectedTenants:I,onSelectionChange:Z,onRefresh:et,currentFilters:S}),(0,a.jsxs)("div",{className:"p-6",children:[a.jsx(ee,{onFiltersChange:G,onClearFilters:H,initialFilters:S}),w?(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(o.Z,{className:"h-16 w-16 text-admin-danger mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-admin-text mb-2",children:"خطا در بارگذاری داده‌ها"}),a.jsx("p",{className:"text-admin-text-light mb-4",children:w}),a.jsx("button",{onClick:()=>Y(),className:"btn-admin-primary",children:"تلاش مجدد"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-admin border border-admin-border overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-admin-border",children:[a.jsx("thead",{className:"bg-admin-bg",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:a.jsx("input",{type:"checkbox",checked:I.length===s.length&&s.length>0,onChange:()=>{I.length===s.length?Z([]):Z(s.map(e=>e.id))},className:"h-4 w-4 text-admin-primary focus:ring-admin-primary border-admin-border rounded"})}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"مستأجر"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"طرح"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"کاربران"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"درآمد ماهانه"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"وضعیت"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"تاریخ ایجاد"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"عملیات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-admin-border",children:y?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"px-6 py-4 text-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-admin-primary mx-auto"})})}):0===s.length?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"px-6 py-8 text-center text-admin-text-muted",children:"هیچ مستأجری یافت نشد"})}):s.map(s=>(0,a.jsxs)("tr",{className:"hover:bg-admin-bg transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("input",{type:"checkbox",checked:I.includes(s.id),onChange:()=>K(s.id),className:"h-4 w-4 text-admin-primary focus:ring-admin-primary border-admin-border rounded"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx("div",{className:"h-10 w-10 rounded-full bg-admin-primary flex items-center justify-center",children:a.jsx(x.Z,{className:"h-5 w-5 text-white"})})}),(0,a.jsxs)("div",{className:"mr-4",children:[a.jsx("div",{className:"text-sm font-medium text-admin-text",children:s.displayName||s.name}),(0,a.jsxs)("div",{className:"text-sm text-admin-text-light",children:[s.subdomain,".servaan.com"]}),a.jsx("div",{className:"text-xs text-admin-text-muted",children:s.businessType||"نامشخص"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:en(s.plan)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center text-sm text-admin-text",children:[a.jsx(u.Z,{className:"h-4 w-4 ml-1 text-admin-text-muted"}),s.userCount||0]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center text-sm text-admin-text",children:[a.jsx(h.Z,{className:"h-4 w-4 ml-1 text-admin-text-muted"}),ei(s.monthlyRevenue||0)]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:er(s.isActive||"ACTIVE"===s.status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-admin-text-muted",children:(0,f.cp)(s.createdAt,{format:"short"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx("button",{onClick:t=>{t.stopPropagation(),e.push(`/admin/tenants/${s.id}`)},className:"text-admin-primary hover:text-admin-primary-dark",title:"مشاهده جزئیات",children:a.jsx(p.Z,{className:"h-4 w-4"})}),a.jsx("button",{onClick:e=>{e.stopPropagation(),Q(s)},className:"text-admin-warning hover:text-admin-warning-dark",title:"ویرایش",children:a.jsx(b.Z,{className:"h-4 w-4"})}),a.jsx("button",{onClick:e=>{e.stopPropagation(),es(s)},disabled:z===s.id,className:`hover:opacity-80 ${s.isActive||"ACTIVE"===s.status?"text-admin-danger":"text-admin-success"}`,title:s.isActive||"ACTIVE"===s.status?"غیرفعال‌سازی":"فعال‌سازی",children:z===s.id?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2"}):s.isActive||"ACTIVE"===s.status?a.jsx(d.Z,{className:"h-4 w-4"}):a.jsx(i.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"relative group",children:[a.jsx("button",{onClick:e=>e.stopPropagation(),className:"text-admin-text-muted hover:text-admin-text",title:"عملیات بیشتر",children:a.jsx(j.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"absolute left-0 bottom-full mb-2 bg-white border border-admin-border rounded-admin shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-150 z-10 min-w-[160px]",children:[a.jsx("button",{onClick:e=>{e.stopPropagation(),Q(s)},className:"block w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg",children:"ویرایش"}),a.jsx("button",{onClick:e=>{e.stopPropagation(),es(s)},className:"block w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg",children:s.isActive||"ACTIVE"===s.status?"غیرفعال‌سازی":"فعال‌سازی"}),a.jsx("button",{onClick:t=>{t.stopPropagation(),e.push(`/admin/tenants/${s.id}`)},className:"block w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg",children:"مشاهده"})]})]})]})})]},s.id))})]})})}),C.pages>1&&(0,a.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-admin-text-muted",children:["نمایش ",(C.page-1)*C.limit+1," تا ",Math.min(C.page*C.limit,C.total)," از ",C.total," نتیجه"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx("button",{onClick:()=>J(C.page-1),disabled:1===C.page,className:"px-3 py-2 text-sm font-medium text-admin-text bg-white border border-admin-border rounded-admin hover:bg-admin-bg disabled:opacity-50 disabled:cursor-not-allowed",children:"قبلی"}),Array.from({length:Math.min(5,C.pages)},(e,s)=>{let t=s+1;return a.jsx("button",{onClick:()=>J(t),className:`px-3 py-2 text-sm font-medium rounded-admin ${t===C.page?"bg-admin-primary text-white":"text-admin-text bg-white border border-admin-border hover:bg-admin-bg"}`,children:t},t)}),a.jsx("button",{onClick:()=>J(C.page+1),disabled:C.page===C.pages,className:"px-3 py-2 text-sm font-medium text-admin-text bg-white border border-admin-border rounded-admin hover:bg-admin-bg disabled:opacity-50 disabled:cursor-not-allowed",children:"بعدی"})]})]})]})]}),a.jsx(E,{tenant:$,isOpen:q,onClose:()=>{B(!1),L(null)},onSave:e=>{let s={id:e.id,name:e.name,displayName:e.displayName,subdomain:e.subdomain,description:e.description,businessType:e.businessType,city:e.city,country:e.country,status:"ACTIVE",plan:e.plan,isActive:e.isActive,ownerName:e.ownerName,ownerEmail:e.ownerEmail,ownerPhone:e.ownerPhone,createdAt:e.createdAt,updatedAt:e.updatedAt,userCount:0,storageUsed:0,storageLimit:0,features:e.features,metrics:{userCount:0,customerCount:0,orderCount:0,revenue:0}};t(t=>t.map(t=>t.id===e.id?s:t)),g.Am.success("مستأجر با موفقیت به‌روزرسانی شد")}}),a.jsx(_,{isOpen:O,onClose:()=>V(!1),onSuccess:()=>{et(),V(!1)}}),a.jsx(X,{isOpen:D,onClose:()=>U(!1),onSuccess:()=>{et(),U(!1)}})]})})},9242:(e,s,t)=>{"use strict";t.d(s,{xG:()=>r});let a={SYMBOL:"تومان",LOCALE:"fa-IR",DECIMAL_PLACES:0,MIN_AMOUNT:0,MAX_AMOUNT:999999999999};function r(e,s={}){let{includeCurrency:t=!0,minimumFractionDigits:r=a.DECIMAL_PLACES,maximumFractionDigits:n=a.DECIMAL_PLACES,locale:i=a.LOCALE}=s,d=function(e){if(null==e)return{isValid:!1,value:0,error:"Amount cannot be null or undefined"};let s="string"==typeof e?parseFloat(e):Number(e);return isNaN(s)?{isValid:!1,value:0,error:"Amount must be a valid number"}:s<a.MIN_AMOUNT?{isValid:!1,value:s,error:`Amount must be at least ${a.MIN_AMOUNT} Toman`}:s>a.MAX_AMOUNT?{isValid:!1,value:s,error:`Amount cannot exceed ${a.MAX_AMOUNT} Toman`}:{isValid:!0,value:Math.round(s)}}(e);if(!d.isValid)return t?`۰ ${a.SYMBOL}`:"۰";try{let e=new Intl.NumberFormat(i,{minimumFractionDigits:r,maximumFractionDigits:n}).format(d.value);return t?`${e} ${a.SYMBOL}`:e}catch(e){return console.error("Error formatting currency:",e),t?`۰ ${a.SYMBOL}`:"۰"}}},4993:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`D:\servaan\src\admin\frontend\src\app\admin\tenants\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[410,554,428,599,162],()=>t(7229));module.exports=a})();
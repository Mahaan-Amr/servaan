(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[920],{7599:function(e,t,r){Promise.resolve().then(r.bind(r,8627))},9205:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var s=r(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:d="",children:u,iconNode:m,...p}=e;return(0,s.createElement)("svg",{ref:t,...c,width:a,height:a,stroke:r,strokeWidth:i?24*Number(n)/Number(a):n,className:o("lucide",d),...!u&&!l(p)&&{"aria-hidden":"true"},...p},[...m.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{className:l,...c}=r;return(0,s.createElement)(d,{ref:n,iconNode:t,className:o("lucide-".concat(a(i(e))),"lucide-".concat(e),l),...c})});return r.displayName=i(e),r}},2208:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9345:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},8906:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},8627:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var s=r(7437),a=r(2265),n=r(9376),i=r(4540),o=r(8906),l=r(9345),c=r(9205);let d=(0,c.Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),u=(0,c.Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var m=r(2208),p=r(9064),h=r(8941);function f(){let[e,t]=(0,a.useState)({email:"",password:""}),[r,c]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!1),{login:x,user:v,loading:w}=(0,i.J3)(),y=(0,n.useRouter)();(0,a.useEffect)(()=>{v&&!w&&y.push("/admin/dashboard")},[v,w,y]);let b=async t=>{if(t.preventDefault(),!e.email||!e.password){p.ZP.error((0,h.t)("messages.requiredField"));return}try{g(!0),await x(e),p.ZP.success((0,h.t)("messages.loginSuccess"))}catch(e){p.ZP.error(e.message||(0,h.t)("messages.loginFailed"))}finally{g(!1)}},N=e=>{let{name:r,value:s}=e.target;t(e=>({...e,[r]:s}))};return w?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-admin-bg",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-admin-primary border-t-transparent"})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto h-16 w-16 bg-admin-primary rounded-full flex items-center justify-center",children:(0,s.jsx)(o.Z,{className:"h-8 w-8 text-white"})}),(0,s.jsx)("h2",{className:"mt-6 text-3xl font-bold text-admin-text",children:(0,h.t)("navigation.dashboard")}),(0,s.jsxs)("p",{className:"mt-2 text-sm text-admin-text-light",children:[(0,h.t)("dashboard.welcome")," به پنل مدیریت پلتفرم سِروان"]})]}),(0,s.jsxs)("div",{className:"bg-admin-card py-8 px-6 shadow-admin-xl rounded-admin",children:[(0,s.jsxs)("form",{className:"space-y-6",onSubmit:b,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-admin-text",children:(0,h.t)("common.email")}),(0,s.jsxs)("div",{className:"mt-1 relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,s.jsx)(l.Z,{className:"h-5 w-5 text-admin-text-muted"})}),(0,s.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e.email,onChange:N,className:"form-admin-input pr-10 text-right",placeholder:"admin@servaan.com"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-admin-text",children:(0,h.t)("common.password")}),(0,s.jsxs)("div",{className:"mt-1 relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,s.jsx)(d,{className:"h-5 w-5 text-admin-text-muted"})}),(0,s.jsx)("input",{id:"password",name:"password",type:r?"text":"password",autoComplete:"current-password",required:!0,value:e.password,onChange:N,className:"form-admin-input pr-10 pl-10 text-right",placeholder:"رمز عبور خود را وارد کنید"}),(0,s.jsx)("button",{type:"button",className:"absolute inset-y-0 left-0 pl-3 flex items-center",onClick:()=>c(!r),children:r?(0,s.jsx)(u,{className:"h-5 w-5 text-admin-text-muted hover:text-admin-text"}):(0,s.jsx)(m.Z,{className:"h-5 w-5 text-admin-text-muted hover:text-admin-text"})})]})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:f,className:"w-full btn-admin-primary flex justify-center items-center py-3 px-4 text-lg font-medium",children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent ml-2"}),(0,h.t)("common.loading")]}):(0,h.t)("common.login")})})]}),(0,s.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-admin",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-admin-text mb-2",children:"اطلاعات ورود آزمایشی:"}),(0,s.jsxs)("div",{className:"text-xs text-admin-text-light space-y-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"مدیر کل:"})," admin@servaan.com / AdminSecure2024!"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"مدیر پلتفرم:"})," platform@servaan.com / PlatformSecure2024!"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"پشتیبانی:"})," support@servaan.com / SupportSecure2024!"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"توسعه‌دهنده:"})," developer@servaan.com / DeveloperSecure2024!"]})]})]})]}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{className:"text-xs text-admin-text-muted",children:"\xa9 ۱۴۰۳ سِروان. تمامی حقوق محفوظ است."})})]})})}},8941:function(e,t,r){"use strict";r.d(t,{t:function(){return i}});let s={common:{loading:"در حال بارگذاری...",error:"خطا",success:"موفقیت",warning:"هشدار",info:"اطلاعات",save:"ذخیره",cancel:"انصراف",delete:"حذف",edit:"ویرایش",view:"مشاهده",add:"افزودن",search:"جستجو",filter:"فیلتر",refresh:"تازه‌سازی",export:"خروجی",import:"ورودی",download:"دانلود",upload:"آپلود",close:"بستن",back:"بازگشت",next:"بعدی",previous:"قبلی",submit:"ثبت",reset:"بازنشانی",confirm:"تأیید",yes:"بله",no:"خیر",ok:"باشه",actions:"عملیات",status:"وضعیت",date:"تاریخ",time:"زمان",name:"نام",email:"ایمیل",phone:"تلفن",address:"آدرس",description:"توضیحات",notes:"یادداشت‌ها",created:"ایجاد شده",updated:"به‌روزرسانی شده",lastLogin:"آخرین ورود",role:"نقش",permissions:"دسترسی‌ها",settings:"تنظیمات",profile:"پروفایل",logout:"خروج",login:"ورود",register:"ثبت‌نام",password:"رمز عبور",currentPassword:"رمز عبور فعلی",newPassword:"رمز عبور جدید",confirmPassword:"تأیید رمز عبور",rememberMe:"مرا به خاطر بسپار",forgotPassword:"فراموشی رمز عبور",twoFactorCode:"کد احراز هویت دو مرحله‌ای"},navigation:{dashboard:"داشبورد",tenants:"مستأجرین",users:"کاربران",analytics:"تحلیل‌ها",security:"امنیت",system:"سیستم",support:"پشتیبانی",reports:"گزارش‌ها",settings:"تنظیمات",profile:"پروفایل",logout:"خروج"},dashboard:{title:"داشبورد مدیریت",welcome:"خوش آمدید",welcomeBack:"خوش برگشتی",overview:"نمای کلی",summary:"خلاصه",quickActions:"عملیات سریع",recentActivity:"فعالیت‌های اخیر",systemHealth:"سلامت سیستم",performance:"عملکرد",alerts:"هشدارها",notifications:"اعلان‌ها",lastUpdated:"آخرین به‌روزرسانی",viewAll:"مشاهده همه",generateReport:"ایجاد گزارش",systemSettings:"تنظیمات سیستم"},stats:{totalTenants:"کل مستأجرین",activeTenants:"مستأجرین فعال",totalUsers:"کل کاربران",activeUsers:"کاربران فعال",monthlyRevenue:"درآمد ماهانه",systemHealth:"سلامت سیستم",uptime:"زمان کارکرد",responseTime:"زمان پاسخ",cpuUsage:"استفاده از پردازنده",memoryUsage:"استفاده از حافظه",diskUsage:"استفاده از دیسک",networkIO:"ورودی/خروجی شبکه",transactions:"تراکنش‌ها",orders:"سفارشات",customers:"مشتریان",items:"کالاها",suppliers:"تأمین‌کنندگان"},status:{active:"فعال",inactive:"غیرفعال",pending:"در انتظار",suspended:"معلق",cancelled:"لغو شده",completed:"تکمیل شده",failed:"ناموفق",processing:"در حال پردازش",online:"آنلاین",offline:"آفلاین",healthy:"سالم",warning:"هشدار",critical:"بحرانی",maintenance:"تعمیر و نگهداری",error:"خطا",success:"موفق",info:"اطلاعات"},tenants:{title:"مدیریت مستأجرین",addTenant:"افزودن مستأجر جدید",editTenant:"ویرایش مستأجر",deleteTenant:"حذف مستأجر",tenantDetails:"جزئیات مستأجر",tenantName:"نام مستأجر",subdomain:"زیردامنه",businessType:"نوع کسب‌وکار",city:"شهر",country:"کشور",plan:"طرح",status:"وضعیت",ownerName:"نام مالک",ownerEmail:"ایمیل مالک",ownerPhone:"تلفن مالک",maxUsers:"حداکثر کاربران",maxItems:"حداکثر کالاها",maxCustomers:"حداکثر مشتریان",createdAt:"تاریخ ایجاد",lastActive:"آخرین فعالیت",storageUsed:"فضای استفاده شده",storageLimit:"محدودیت فضا",userCount:"تعداد کاربران",features:"ویژگی‌ها",billing:"صورتحساب",support:"پشتیبانی"},users:{title:"مدیریت کاربران",addUser:"افزودن کاربر جدید",editUser:"ویرایش کاربر",deleteUser:"حذف کاربر",userDetails:"جزئیات کاربر",firstName:"نام",lastName:"نام خانوادگی",fullName:"نام کامل",username:"نام کاربری",email:"ایمیل",phone:"تلفن",role:"نقش",permissions:"دسترسی‌ها",isActive:"فعال",lastLogin:"آخرین ورود",loginCount:"تعداد ورود",createdAt:"تاریخ ایجاد",updatedAt:"تاریخ به‌روزرسانی",tenant:"مستأجر",workspace:"فضای کاری",department:"بخش",position:"سمت",manager:"مدیر",subordinates:"زیردستان"},analytics:{title:"تحلیل‌ها و گزارش‌ها",overview:"نمای کلی",trends:"روندها",comparisons:"مقایسه‌ها",performance:"عملکرد",revenue:"درآمد",growth:"رشد",conversion:"تبدیل",retention:"حفظ",engagement:"تعامل",demographics:"جمعیت‌شناسی",behavior:"رفتار",funnel:"قیف فروش",cohort:"گروه‌بندی",heatmap:"نقشه حرارتی",realTime:"زمان واقعی",historical:"تاریخی",custom:"سفارشی",export:"خروجی",schedule:"زمان‌بندی"},security:{title:"امنیت و نظارت",authentication:"احراز هویت",authorization:"مجوزدهی",accessControl:"کنترل دسترسی",auditLogs:"گزارش‌های حسابرسی",loginAttempts:"تلاش‌های ورود",failedLogins:"ورودهای ناموفق",suspiciousActivity:"فعالیت‌های مشکوک",ipAddresses:"آدرس‌های IP",userAgents:"عامل‌های کاربر",locations:"مکان‌ها",devices:"دستگاه‌ها",sessions:"جلسات",tokens:"توکن‌ها",apiKeys:"کلیدهای API",rateLimiting:"محدودیت نرخ",firewall:"دیوار آتش",encryption:"رمزگذاری",backups:"پشتیبان‌گیری",compliance:"انطباق"},system:{title:"مدیریت سیستم",health:"سلامت",monitoring:"نظارت",performance:"عملکرد",resources:"منابع",logs:"گزارش‌ها",errors:"خطاها",warnings:"هشدارها",maintenance:"تعمیر و نگهداری",updates:"به‌روزرسانی‌ها",backups:"پشتیبان‌گیری",restore:"بازیابی",configuration:"پیکربندی",environment:"محیط",database:"پایگاه داده",cache:"کش",queue:"صف",cron:"وظایف زمان‌بندی شده",api:"رابط برنامه‌نویسی",webhooks:"وب‌هوک‌ها",integrations:"ادغام‌ها"},support:{title:"پشتیبانی و کمک",tickets:"تیکت‌ها",createTicket:"ایجاد تیکت",ticketDetails:"جزئیات تیکت",priority:"اولویت",status:"وضعیت",category:"دسته‌بندی",subject:"موضوع",message:"پیام",attachments:"پیوست‌ها",responses:"پاسخ‌ها",assignedTo:"تخصیص داده شده به",createdAt:"تاریخ ایجاد",updatedAt:"تاریخ به‌روزرسانی",closedAt:"تاریخ بسته شدن",resolution:"راه‌حل",satisfaction:"رضایت",feedback:"بازخورد",knowledge:"دانش",faq:"سؤالات متداول",guides:"راهنماها",tutorials:"آموزش‌ها"},messages:{loginSuccess:"ورود موفقیت‌آمیز بود",logoutSuccess:"خروج موفقیت‌آمیز بود",saveSuccess:"اطلاعات با موفقیت ذخیره شد",deleteSuccess:"آیتم با موفقیت حذف شد",updateSuccess:"اطلاعات با موفقیت به‌روزرسانی شد",createSuccess:"آیتم جدید با موفقیت ایجاد شد",loginFailed:"ورود ناموفق بود",invalidCredentials:"اطلاعات ورود نامعتبر است",accessDenied:"دسترسی رد شد",notFound:"آیتم مورد نظر یافت نشد",serverError:"خطای سرور رخ داد",networkError:"خطای شبکه رخ داد",validationError:"خطای اعتبارسنجی",requiredField:"این فیلد الزامی است",invalidFormat:"فرمت نامعتبر است",unsavedChanges:"تغییرات ذخیره نشده است",confirmDelete:"آیا از حذف این آیتم اطمینان دارید؟",sessionExpired:"جلسه شما منقضی شده است",lowStorage:"فضای ذخیره‌سازی کم است",highUsage:"استفاده بالا از منابع",loadingData:"در حال بارگذاری اطلاعات...",noData:"داده‌ای موجود نیست",searchResults:"نتایج جستجو",filteredResults:"نتایج فیلتر شده",showingResults:"نمایش نتایج",totalResults:"کل نتایج"},time:{now:"اکنون",today:"امروز",yesterday:"دیروز",tomorrow:"فردا",thisWeek:"این هفته",lastWeek:"هفته گذشته",nextWeek:"هفته آینده",thisMonth:"این ماه",lastMonth:"ماه گذشته",nextMonth:"ماه آینده",thisYear:"امسال",lastYear:"سال گذشته",nextYear:"سال آینده",ago:"قبل",in:"در",from:"از",to:"تا",between:"بین",duration:"مدت",remaining:"باقی‌مانده",overdue:"معوق",scheduled:"زمان‌بندی شده"},numbers:{zero:"صفر",one:"یک",two:"دو",three:"سه",four:"چهار",five:"پنج",six:"شش",seven:"هفت",eight:"هشت",nine:"نه",ten:"ده",hundred:"صد",thousand:"هزار",million:"میلیون",billion:"میلیارد",trillion:"تریلیون",percent:"درصد",decimal:"اعشار",fraction:"کسر",currency:"واحد پول",rial:"ریال",toman:"تومان",dollar:"دلار",euro:"یورو"},actions:{view:"مشاهده",edit:"ویرایش",delete:"حذف",create:"ایجاد",update:"به‌روزرسانی",save:"ذخیره",cancel:"انصراف",confirm:"تأیید",approve:"تأیید",reject:"رد",activate:"فعال‌سازی",deactivate:"غیرفعال‌سازی",suspend:"معلق کردن",restore:"بازیابی",backup:"پشتیبان‌گیری",export:"خروجی",import:"ورودی",download:"دانلود",upload:"آپلود",send:"ارسال",receive:"دریافت",start:"شروع",stop:"توقف",pause:"توقف موقت",resume:"ادامه",refresh:"تازه‌سازی",reload:"بارگذاری مجدد",search:"جستجو",filter:"فیلتر",sort:"مرتب‌سازی",group:"گروه‌بندی",expand:"گسترش",collapse:"فشرده‌سازی",show:"نمایش",hide:"مخفی",enable:"فعال‌سازی",disable:"غیرفعال‌سازی",configure:"پیکربندی",customize:"سفارشی‌سازی",manage:"مدیریت",monitor:"نظارت",analyze:"تحلیل",report:"گزارش",notify:"اعلان",alert:"هشدار",log:"ثبت",audit:"حسابرسی",secure:"امن‌سازی",migrate:"انتقال",upgrade:"ارتقا",install:"نصب",uninstall:"حذف نصب",deploy:"استقرار",rollback:"بازگشت",scale:"مقیاس‌بندی",optimize:"بهینه‌سازی",maintain:"نگهداری",repair:"تعمیر",clean:"پاک‌سازی",archive:"آرشیو",sync:"همگام‌سازی"}},a={common:{loading:"Loading...",error:"Error",success:"Success",warning:"Warning",info:"Info",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",view:"View",add:"Add",search:"Search",filter:"Filter",refresh:"Refresh",export:"Export",import:"Import",download:"Download",upload:"Upload",close:"Close",back:"Back",next:"Next",previous:"Previous",submit:"Submit",reset:"Reset",confirm:"Confirm",yes:"Yes",no:"No",ok:"OK",actions:"Actions",status:"Status",date:"Date",time:"Time",name:"Name",email:"Email",phone:"Phone",address:"Address",description:"Description",notes:"Notes",created:"Created",updated:"Updated",lastLogin:"Last Login",role:"Role",permissions:"Permissions",settings:"Settings",profile:"Profile",logout:"Logout",login:"Login",register:"Register",password:"Password",currentPassword:"Current Password",newPassword:"New Password",confirmPassword:"Confirm Password",rememberMe:"Remember Me",forgotPassword:"Forgot Password",twoFactorCode:"Two-Factor Code"}},n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fa";return"fa"===e?s:a},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fa",r=n(t),s=e.split("."),a=r;for(let t of s){if(!a||"object"!=typeof a||!(t in a))return e;a=a[t]}return"string"==typeof a?a:e}},4540:function(e,t,r){"use strict";r.d(t,{J3:function(){return c},W:function(){return l},c2:function(){return d}});var s=r(7437),a=r(2265),n=r(9376),i=r(4300);let o=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),[u,m]=(0,a.useState)(null),p=(0,n.useRouter)(),h=(0,a.useCallback)(async()=>{try{if(d(!0),!i.KE()){l(null),d(!1);return}if(!await i.Wg()){i.w3(),l(null),d(!1);return}let e=await i.T();l(e),i.ZM(e,!0)}catch(e){console.error("Admin auth check failed:",e),i.w3(),l(null)}finally{d(!1)}},[]),f=(0,a.useCallback)(async e=>{try{d(!0),m(null);let t=await i.$g(e);if(t.success)l(t.data.user),p.push("/admin/dashboard");else throw Error(t.message||"Login failed")}catch(e){throw console.error("Admin login error:",e),m(e.message||"Login failed"),e}finally{d(!1)}},[p]),g=(0,a.useCallback)(async()=>{try{d(!0),await i.rE()}catch(e){console.error("Admin logout error:",e)}finally{l(null),i.w3(),d(!1),p.push("/admin/login")}},[p]),x=(0,a.useCallback)(()=>{m(null)},[]),v=(0,a.useCallback)(e=>i.CI(r,e),[r]),w=(0,a.useCallback)(e=>i.Aw(r,e),[r]);return(0,a.useEffect)(()=>{h()},[h]),(0,a.useEffect)(()=>{if(!r)return;let e=i.KE();if(e)try{let t=JSON.parse(atob(e.split(".")[1])),r=1e3*t.exp,s=Date.now(),a=r-s;a>0&&a<3e5&&(console.log("Admin token expiring soon, refreshing..."),h())}catch(e){console.error("Error parsing admin token:",e)}},[r,h]),(0,s.jsx)(o.Provider,{value:{user:r,loading:c,error:u,login:f,logout:g,clearError:x,hasRole:v,hasAnyRole:w,isAuthenticated:!!r},children:t})}function c(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAdminAuth must be used within an AdminAuthProvider");return e}function d(e,t){return function(r){let{user:i,loading:o,hasRole:l}=c(),d=(0,n.useRouter)();return((0,a.useEffect)(()=>{if(!o){if(!i){d.push("/admin/login");return}if(t&&!l(t)){d.push("/admin/unauthorized");return}}},[i,o,l,d]),o)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-admin-primary border-t-transparent"})}):i&&(!t||l(t))?(0,s.jsx)(e,{...r}):null}}},4300:function(e,t,r){"use strict";r.d(t,{$g:function(){return x},rE:function(){return v},w3:function(){return f},ZP:function(){return k},T:function(){return w},KE:function(){return p},CI:function(){return b},Aw:function(){return N},ZM:function(){return g},Wg:function(){return y}});var s,a,n,i,o,l,c,d,u=r(3464);(s=o||(o={})).SUPER_ADMIN="SUPER_ADMIN",s.PLATFORM_ADMIN="PLATFORM_ADMIN",s.SUPPORT="SUPPORT",s.DEVELOPER="DEVELOPER",(a=l||(l={})).HEALTHY="HEALTHY",a.WARNING="WARNING",a.CRITICAL="CRITICAL",a.MAINTENANCE="MAINTENANCE",(n=c||(c={})).ACTIVE="ACTIVE",n.SUSPENDED="SUSPENDED",n.PENDING="PENDING",n.CANCELLED="CANCELLED",(i=d||(d={})).STARTER="STARTER",i.BUSINESS="BUSINESS",i.ENTERPRISE="ENTERPRISE";let m=u.Z.create({baseURL:"http://localhost:3003/api",timeout:1e4,headers:{"Content-Type":"application/json"}});m.interceptors.request.use(e=>{let t=p();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),m.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(f(),window.location.href="/admin/login"),Promise.reject(e)});let p=()=>{let e=localStorage.getItem("admin_token"),t=sessionStorage.getItem("admin_token");return e||t},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?localStorage.setItem("admin_token",e):sessionStorage.setItem("admin_token",e)},f=()=>{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user"),sessionStorage.removeItem("admin_token"),sessionStorage.removeItem("admin_user"),delete m.defaults.headers.common.Authorization},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=JSON.stringify(e);t?localStorage.setItem("admin_user",r):sessionStorage.setItem("admin_user",r)},x=async e=>{try{let t=(await m.post("/admin/auth/login",e)).data;if(t.success){let{user:e,token:r}=t.data;return h(r,!0),g(e,!0),m.defaults.headers.common.Authorization="Bearer ".concat(r),{success:!0,message:t.message,data:{user:e,token:r}}}throw Error(t.message||"Login failed")}catch(e){var t,r;throw console.error("Admin login error:",e),Error((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||e.message||"Login failed")}},v=async()=>{try{p()&&await m.post("/admin/auth/logout")}catch(e){console.error("Admin logout error:",e)}finally{f()}},w=async()=>{try{return(await m.get("/admin/auth/profile")).data.data}catch(r){var e,t;throw console.error("Get admin profile error:",r),Error((null===(t=r.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||r.message||"Failed to get profile")}},y=async()=>{try{return(await m.get("/admin/auth/verify")).data.success}catch(e){return console.error("Admin token verification failed:",e),!1}},b=(e,t)=>!!e&&e.role===t,N=(e,t)=>!!e&&t.includes(e.role);var k=m}},function(e){e.O(0,[301,64,971,117,744],function(){return e(e.s=7599)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{7899:function(e,a,t){Promise.resolve().then(t.bind(t,3753))},9397:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9205).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2489:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},3753:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return ea}});var s=t(7437),n=t(2265),r=t(9376),i=t(1671),d=t(9388),l=t(6215),m=t(2735),c=t(9397),o=t(6865),x=t(8420),u=t(5805),h=t(5252),p=t(2208),b=t(5868),j=t(7782),g=t(9064),v=t(340),f=t(4607),N=t(4540),y=t(2489),w=t(2369),k=t(8728),C=t(8906),A=t(9205);let S=(0,A.Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function E(e){let{tenant:a,isOpen:t,onClose:r,onSave:i}=e,[d,l]=(0,n.useState)({}),[m,c]=(0,n.useState)(!1),[o,u]=(0,n.useState)("basic");(0,n.useEffect)(()=>{a&&l({name:a.name,displayName:a.displayName,description:a.description,plan:a.plan,isActive:a.isActive,ownerName:a.ownerName,ownerEmail:a.ownerEmail,ownerPhone:a.ownerPhone,businessType:a.businessType,city:a.city,country:a.country,features:a.features?{...a.features}:void 0})},[a]);let h=(e,a)=>{l(t=>({...t,[e]:a}))},p=e=>{l(a=>{var t,s,n,r,i,d,l,m,c,o,x,u,h,p,b,j,g,v,f,N,y,w,k,C,A,S,E;return{...a,features:{hasInventoryManagement:null!==(b=null===(t=a.features)||void 0===t?void 0:t.hasInventoryManagement)&&void 0!==b&&b,hasCustomerManagement:null!==(j=null===(s=a.features)||void 0===s?void 0:s.hasCustomerManagement)&&void 0!==j&&j,hasAccountingSystem:null!==(g=null===(n=a.features)||void 0===n?void 0:n.hasAccountingSystem)&&void 0!==g&&g,hasReporting:null!==(v=null===(r=a.features)||void 0===r?void 0:r.hasReporting)&&void 0!==v&&v,hasNotifications:null!==(f=null===(i=a.features)||void 0===i?void 0:i.hasNotifications)&&void 0!==f&&f,hasAdvancedReporting:null!==(N=null===(d=a.features)||void 0===d?void 0:d.hasAdvancedReporting)&&void 0!==N&&N,hasApiAccess:null!==(y=null===(l=a.features)||void 0===l?void 0:l.hasApiAccess)&&void 0!==y&&y,hasCustomBranding:null!==(w=null===(m=a.features)||void 0===m?void 0:m.hasCustomBranding)&&void 0!==w&&w,hasMultiLocation:null!==(k=null===(c=a.features)||void 0===c?void 0:c.hasMultiLocation)&&void 0!==k&&k,hasAdvancedCRM:null!==(C=null===(o=a.features)||void 0===o?void 0:o.hasAdvancedCRM)&&void 0!==C&&C,hasWhatsappIntegration:null!==(A=null===(x=a.features)||void 0===x?void 0:x.hasWhatsappIntegration)&&void 0!==A&&A,hasInstagramIntegration:null!==(S=null===(u=a.features)||void 0===u?void 0:u.hasInstagramIntegration)&&void 0!==S&&S,hasAnalyticsBI:null!==(E=null===(h=a.features)||void 0===h?void 0:h.hasAnalyticsBI)&&void 0!==E&&E,[e]:!(null===(p=a.features)||void 0===p?void 0:p[e])}}})},b=async e=>{if(e.preventDefault(),a)try{c(!0);let e=await (0,v.Jq)(a.id,d);g.Am.success("مستأجر با موفقیت به‌روزرسانی شد"),i(e),r()}catch(e){g.Am.error(e.message||"خطا در به‌روزرسانی مستأجر")}finally{c(!1)}};return t&&a?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-admin shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-admin-border",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(x.Z,{className:"h-6 w-6 text-admin-primary ml-2"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-admin-text",children:"ویرایش مستأجر"})]}),(0,s.jsx)("button",{onClick:r,className:"text-admin-text-muted hover:text-admin-text",children:(0,s.jsx)(y.Z,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"flex border-b border-admin-border",children:[(0,s.jsxs)("button",{onClick:()=>u("basic"),className:"px-6 py-3 text-sm font-medium border-b-2 ".concat("basic"===o?"border-admin-primary text-admin-primary":"border-transparent text-admin-text-muted hover:text-admin-text"),children:[(0,s.jsx)(w.Z,{className:"h-4 w-4 ml-2 inline"}),"اطلاعات پایه"]}),(0,s.jsxs)("button",{onClick:()=>u("features"),className:"px-6 py-3 text-sm font-medium border-b-2 ".concat("features"===o?"border-admin-primary text-admin-primary":"border-transparent text-admin-text-muted hover:text-admin-text"),children:[(0,s.jsx)(k.Z,{className:"h-4 w-4 ml-2 inline"}),"ویژگی‌ها"]}),(0,s.jsxs)("button",{onClick:()=>u("advanced"),className:"px-6 py-3 text-sm font-medium border-b-2 ".concat("advanced"===o?"border-admin-primary text-admin-primary":"border-transparent text-admin-text-muted hover:text-admin-text"),children:[(0,s.jsx)(C.Z,{className:"h-4 w-4 ml-2 inline"}),"تنظیمات پیشرفته"]})]}),(0,s.jsxs)("form",{onSubmit:b,className:"p-6",children:["basic"===o&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام مستأجر *"}),(0,s.jsx)("input",{type:"text",value:d.name||"",onChange:e=>h("name",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام نمایشی"}),(0,s.jsx)("input",{type:"text",value:d.displayName||"",onChange:e=>h("displayName",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"ایمیل مالک *"}),(0,s.jsx)("input",{type:"email",value:d.ownerEmail||"",onChange:e=>h("ownerEmail",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام مالک"}),(0,s.jsx)("input",{type:"text",value:d.ownerName||"",onChange:e=>h("ownerName",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شماره تلفن"}),(0,s.jsx)("input",{type:"tel",value:d.ownerPhone||"",onChange:e=>h("ownerPhone",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نوع کسب و کار"}),(0,s.jsx)("input",{type:"text",value:d.businessType||"",onChange:e=>h("businessType",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شهر"}),(0,s.jsx)("input",{type:"text",value:d.city||"",onChange:e=>h("city",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"کشور *"}),(0,s.jsx)("input",{type:"text",value:d.country||"",onChange:e=>h("country",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"توضیحات"}),(0,s.jsx)("textarea",{value:d.description||"",onChange:e=>h("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]}),"features"===o&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"طرح *"}),(0,s.jsxs)("select",{value:d.plan||"",onChange:e=>h("plan",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,children:[(0,s.jsx)("option",{value:"STARTER",children:"استارتر"}),(0,s.jsx)("option",{value:"BUSINESS",children:"بیزینس"}),(0,s.jsx)("option",{value:"ENTERPRISE",children:"انترپرایز"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"وضعیت"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 space-x-reverse",children:[(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"radio",name:"isActive",checked:!0===d.isActive,onChange:()=>h("isActive",!0),className:"ml-2 text-admin-primary focus:ring-admin-primary"}),"فعال"]}),(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"radio",name:"isActive",checked:!1===d.isActive,onChange:()=>h("isActive",!1),className:"ml-2 text-admin-primary focus:ring-admin-primary"}),"غیرفعال"]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-admin-text mb-4",children:"ویژگی‌های سیستم"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.features&&Object.entries(d.features).map(e=>{let[a,t]=e;return(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:t,onChange:()=>p(a),className:"ml-2 text-admin-primary focus:ring-admin-primary"}),(0,s.jsx)("span",{className:"text-sm text-admin-text",children:{hasInventoryManagement:"مدیریت موجودی",hasCustomerManagement:"مدیریت مشتریان",hasAccountingSystem:"سیستم حسابداری",hasReporting:"گزارش‌گیری",hasNotifications:"اعلان‌ها",hasAdvancedReporting:"گزارش‌گیری پیشرفته",hasApiAccess:"دسترسی API",hasCustomBranding:"برندینگ سفارشی",hasMultiLocation:"چند شعبه",hasAdvancedCRM:"CRM پیشرفته",hasWhatsappIntegration:"ادغام واتساپ",hasInstagramIntegration:"ادغام اینستاگرام",hasAnalyticsBI:"تحلیل و هوش تجاری"}[a]||a})]},a)})})]})]}),"advanced"===o&&(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"bg-admin-bg p-4 rounded-admin",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-admin-text mb-4",children:"تنظیمات پیشرفته"}),(0,s.jsx)("p",{className:"text-sm text-admin-text-muted",children:"این بخش برای تنظیمات پیشرفته و دسترسی‌های خاص در نظر گرفته شده است."})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-3 space-x-reverse pt-6 border-t border-admin-border",children:[(0,s.jsx)("button",{type:"button",onClick:r,className:"btn-admin-secondary",disabled:m,children:"انصراف"}),(0,s.jsx)("button",{type:"submit",className:"btn-admin-primary flex items-center",disabled:m,children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}),"در حال ذخیره..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S,{className:"h-4 w-4 ml-2"}),"ذخیره تغییرات"]})})]})]})]})}):null}let I=(0,A.Z)("square-check-big",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),M=(0,A.Z)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Z=(0,A.Z)("power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),T=(0,A.Z)("power-off",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function R(e){var a;let{tenants:t,selectedTenants:r,onSelectionChange:l,onRefresh:c,currentFilters:x}=e,[u,h]=(0,n.useState)(!1),[p,b]=(0,n.useState)(!1),[j,f]=(0,n.useState)(null),N=r.length===t.length&&t.length>0,y=async(e,a)=>{if(0===r.length){g.Am.error("لطفاً حداقل یک مستأجر را انتخاب کنید");return}"export"===e?f({type:"export",format:a}):f({type:e}),b(!0)},w=async()=>{if(j&&0!==r.length)try{if(h(!0),"export"===j.type&&j.format)await (0,v.oL)(j.format,x,r),g.Am.success("صادرات ".concat(r.length," مستأجر با موفقیت انجام شد"));else if("activate"===j.type||"deactivate"===j.type){let e="activate"===j.type;await (0,v._7)(r,e),g.Am.success("".concat(r.length," مستأجر با موفقیت ").concat(e?"فعال":"غیرفعال"," شد")),c(),l([])}}catch(a){let e=a instanceof Error?a.message:"خطا در انجام عملیات گروهی";g.Am.error(e)}finally{h(!1),b(!1),f(null)}};return 0===t.length?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-admin-primary text-white p-4 rounded-admin transition-all duration-300 ".concat(r.length>0?"opacity-100 translate-y-0":"opacity-0 -translate-y-full absolute"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 space-x-reverse",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("button",{onClick:()=>{N?l([]):l(t.map(e=>e.id))},className:"flex items-center text-white hover:text-admin-bg transition-colors",children:[N?(0,s.jsx)(I,{className:"h-5 w-5 ml-2"}):(0,s.jsx)(M,{className:"h-5 w-5 ml-2"}),N?"حذف انتخاب همه":"انتخاب همه"]})}),(0,s.jsxs)("div",{className:"text-sm",children:[r.length," مستأجر انتخاب شده"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 space-x-reverse",children:[(0,s.jsxs)("button",{onClick:()=>y("activate"),disabled:u,className:"flex items-center px-3 py-2 bg-admin-success hover:bg-admin-success-dark text-white rounded-admin text-sm transition-colors disabled:opacity-50",children:[(0,s.jsx)(Z,{className:"h-4 w-4 ml-2"}),"فعال‌سازی گروهی"]}),(0,s.jsxs)("button",{onClick:()=>y("deactivate"),disabled:u,className:"flex items-center px-3 py-2 bg-admin-warning hover:bg-admin-warning-dark text-white rounded-admin text-sm transition-colors disabled:opacity-50",children:[(0,s.jsx)(T,{className:"h-4 w-4 ml-2"}),"غیرفعال‌سازی گروهی"]}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsxs)("button",{disabled:u,className:"flex items-center px-3 py-2 bg-admin-info hover:bg-admin-info-dark text-white rounded-admin text-sm transition-colors disabled:opacity-50",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 ml-2"}),"صادرات",(0,s.jsx)("svg",{className:"h-4 w-4 mr-2 transition-transform group-hover:rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,s.jsx)("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-white border border-admin-border rounded-admin shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsx)("button",{onClick:()=>y("export","csv"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"صادرات CSV"}),(0,s.jsx)("button",{onClick:()=>y("export","excel"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"صادرات Excel"}),(0,s.jsx)("button",{onClick:()=>y("export","pdf"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"صادرات PDF"})]})})]}),(0,s.jsx)("button",{onClick:()=>l([]),className:"text-white hover:text-admin-bg transition-colors",title:"حذف انتخاب",children:(0,s.jsx)(d.Z,{className:"h-5 w-5"})})]})]})}),p&&j&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsx)("div",{className:"bg-white rounded-admin shadow-xl max-w-md w-full",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:["export"===j.type?(0,s.jsx)(m.Z,{className:"h-6 w-6 text-admin-info ml-2"}):"activate"===j.type?(0,s.jsx)(i.Z,{className:"h-6 w-6 text-admin-success ml-2"}):(0,s.jsx)(o.Z,{className:"h-6 w-6 text-admin-warning ml-2"}),(0,s.jsxs)("h3",{className:"text-lg font-bold text-admin-text",children:["export"===j.type&&"تأیید صادرات","activate"===j.type&&"تأیید فعال‌سازی گروهی","deactivate"===j.type&&"تأیید غیرفعال‌سازی گروهی"]})]}),(0,s.jsxs)("p",{className:"text-admin-text mb-6",children:["export"===j.type&&"آیا می‌خواهید ".concat(r.length," مستأجر انتخاب شده را به فرمت ").concat(null===(a=j.format)||void 0===a?void 0:a.toUpperCase()," صادر کنید؟"),"activate"===j.type&&"آیا می‌خواهید ".concat(r.length," مستأجر انتخاب شده را فعال کنید؟"),"deactivate"===j.type&&"آیا می‌خواهید ".concat(r.length," مستأجر انتخاب شده را غیرفعال کنید؟")]}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-3 space-x-reverse",children:[(0,s.jsx)("button",{onClick:()=>{b(!1),f(null)},className:"btn-admin-secondary",disabled:u,children:"انصراف"}),(0,s.jsx)("button",{onClick:w,className:"btn-admin-primary flex items-center ".concat("deactivate"===j.type?"bg-admin-warning hover:bg-admin-warning-dark":""),disabled:u,children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}),"در حال انجام..."]}):(0,s.jsxs)(s.Fragment,{children:["export"===j.type&&(0,s.jsx)(m.Z,{className:"h-4 w-4 ml-2"}),"activate"===j.type&&(0,s.jsx)(i.Z,{className:"h-4 w-4 ml-2"}),"deactivate"===j.type&&(0,s.jsx)(o.Z,{className:"h-4 w-4 ml-2"}),"تأیید"]})})]})]})})})]})}var P=t(780),L=t(4401),F=t(525),B=t(3085);function O(e){let{className:a=""}=e,[t,r]=(0,n.useState)(null),[i,d]=(0,n.useState)(null),[c,o]=(0,n.useState)(!0),[p,b]=(0,n.useState)(null),[j,f]=(0,n.useState)(30),[N,y]=(0,n.useState)("day"),[w,k]=(0,n.useState)("monthly"),[C,A]=(0,n.useState)(new Date().getFullYear()),S=(0,n.useCallback)(async()=>{try{o(!0),b(null);let[e,a]=await Promise.all([(0,v.bm)(j,N),(0,v.uW)(w,C)]);r(e),d(a)}catch(e){b(e instanceof Error?e.message:"خطا در بارگذاری داده‌های تحلیلی"),g.Am.error("خطا در بارگذاری داده‌های تحلیلی")}finally{o(!1)}},[j,N,w,C]);(0,n.useEffect)(()=>{S()},[S]);let E=async e=>{try{await (0,v.oL)(e),g.Am.success("صادرات داده‌های تحلیلی با موفقیت انجام شد")}catch(a){let e=a instanceof Error?a.message:"خطا در صادرات داده‌ها";g.Am.error(e)}},I=e=>(0,P.xG)(e);return!c||t||i?p?(0,s.jsx)("div",{className:"bg-white rounded-admin border border-admin-border p-6 ".concat(a),children:(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(L.Z,{className:"h-16 w-16 text-admin-danger mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-admin-text mb-2",children:"خطا در بارگذاری داده‌ها"}),(0,s.jsx)("p",{className:"text-admin-text-light mb-4",children:p}),(0,s.jsx)("button",{onClick:S,className:"btn-admin-primary",children:"تلاش مجدد"})]})}):(0,s.jsxs)("div",{className:"bg-white rounded-admin border border-admin-border ".concat(a),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-admin-border",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(l.Z,{className:"h-6 w-6 text-admin-primary ml-2"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-admin-text",children:"داشبورد تحلیلی مستأجرین"})]}),(0,s.jsx)("div",{className:"flex items-center space-x-3 space-x-reverse",children:(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsxs)("button",{className:"btn-admin-secondary flex items-center",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 ml-2"}),"صادرات"]}),(0,s.jsx)("div",{className:"absolute bottom-full left-0 mb-2 w-32 bg-white border border-admin-border rounded-admin shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsx)("button",{onClick:()=>E("csv"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"CSV"}),(0,s.jsx)("button",{onClick:()=>E("excel"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"Excel"}),(0,s.jsx)("button",{onClick:()=>E("pdf"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"PDF"})]})})]})})]}),(0,s.jsx)("div",{className:"p-6 border-b border-admin-border",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"دوره رشد"}),(0,s.jsxs)("select",{value:j,onChange:e=>f(Number(e.target.value)),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[(0,s.jsx)("option",{value:7,children:"۷ روز"}),(0,s.jsx)("option",{value:30,children:"۳۰ روز"}),(0,s.jsx)("option",{value:90,children:"۹۰ روز"}),(0,s.jsx)("option",{value:365,children:"یک سال"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"گروه‌بندی رشد"}),(0,s.jsxs)("select",{value:N,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[(0,s.jsx)("option",{value:"day",children:"روزانه"}),(0,s.jsx)("option",{value:"week",children:"هفتگی"}),(0,s.jsx)("option",{value:"month",children:"ماهانه"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"دوره درآمد"}),(0,s.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[(0,s.jsx)("option",{value:"daily",children:"روزانه"}),(0,s.jsx)("option",{value:"weekly",children:"هفتگی"}),(0,s.jsx)("option",{value:"monthly",children:"ماهانه"}),(0,s.jsx)("option",{value:"yearly",children:"سالانه"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"سال"}),(0,s.jsx)("select",{value:C,onChange:e=>A(Number(e.target.value)),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:Array.from({length:5},(e,a)=>new Date().getFullYear()-a).map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]})]})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsx)("div",{className:"bg-gradient-to-br from-admin-primary to-admin-primary-dark text-white p-6 rounded-admin",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-admin-bg text-sm font-medium",children:"کل مستأجرین"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:(null==t?void 0:t.data)?t.data.reduce((e,a)=>e+a.new_tenants,0):0})]}),(0,s.jsx)(x.Z,{className:"h-12 w-12 text-admin-bg opacity-80"})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-br from-admin-success to-admin-success-dark text-white p-6 rounded-admin",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-admin-bg text-sm font-medium",children:"مستأجرین فعال"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:(null==t?void 0:t.data)?t.data.reduce((e,a)=>e+a.active_tenants,0):0})]}),(0,s.jsx)(u.Z,{className:"h-12 w-12 text-admin-bg opacity-80"})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-br from-admin-warning to-admin-warning-dark text-white p-6 rounded-admin",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-admin-bg text-sm font-medium",children:"کل درآمد"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:(null==i?void 0:i.summary.totalRevenue)?I(i.summary.totalRevenue):"0"})]}),(0,s.jsx)(h.Z,{className:"h-12 w-12 text-admin-bg opacity-80"})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"bg-admin-bg p-6 rounded-admin",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium text-admin-text mb-4 flex items-center",children:[(0,s.jsx)(F.Z,{className:"h-5 w-5 text-admin-primary ml-2"}),"روند رشد مستأجرین"]}),(null==t?void 0:t.data)&&t.data.length>0?(0,s.jsx)("div",{className:"space-y-3",children:t.data.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-admin-text",children:new Date(e.period).toLocaleDateString("fa-IR")}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 space-x-reverse",children:[(0,s.jsxs)("span",{className:"text-sm text-admin-text",children:["جدید: ",e.new_tenants]}),(0,s.jsxs)("span",{className:"text-sm text-admin-success",children:["فعال: ",e.active_tenants]})]})]},a))}):(0,s.jsx)("div",{className:"text-center py-8 text-admin-text-muted",children:"داده‌ای برای نمایش وجود ندارد"})]}),(0,s.jsxs)("div",{className:"bg-admin-bg p-6 rounded-admin",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium text-admin-text mb-4 flex items-center",children:[(0,s.jsx)(h.Z,{className:"h-5 w-5 text-admin-warning ml-2"}),"روند درآمد"]}),(null==i?void 0:i.data)&&i.data.length>0?(0,s.jsx)("div",{className:"space-y-3",children:i.data.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-admin-text",children:e.period}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 space-x-reverse",children:[(0,s.jsx)("span",{className:"text-sm text-admin-text",children:I(e.revenue)}),(0,s.jsxs)("span",{className:"text-sm flex items-center ".concat(e.growth>=0?"text-admin-success":"text-admin-danger"),children:[e.growth>=0?(0,s.jsx)(F.Z,{className:"h-3 w-3 ml-1"}):(0,s.jsx)(B.Z,{className:"h-3 w-3 ml-1"}),Math.abs(e.growth),"%"]})]})]},a))}):(0,s.jsx)("div",{className:"text-center py-8 text-admin-text-muted",children:"داده‌ای برای نمایش وجود ندارد"})]})]}),(null==i?void 0:i.summary)&&(0,s.jsxs)("div",{className:"mt-8 bg-admin-bg p-6 rounded-admin",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-admin-text mb-4",children:"خلاصه درآمد"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-admin-text-muted mb-1",children:"کل درآمد"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-admin-text",children:I(i.summary.totalRevenue)})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-admin-text-muted mb-1",children:"میانگین رشد"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-admin-success",children:[i.summary.averageGrowth,"%"]})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-admin-text-muted mb-1",children:"بهترین ماه"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-admin-primary",children:i.summary.topMonth})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm text-admin-text-muted mb-1",children:"بیشترین درآمد"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-admin-warning",children:I(i.summary.topRevenue)})]})]})]})]})]}):(0,s.jsx)("div",{className:"bg-white rounded-admin border border-admin-border p-6 ".concat(a),children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-6 bg-admin-bg rounded w-1/4 mb-4"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,s.jsx)("div",{className:"h-20 bg-admin-bg rounded"}),(0,s.jsx)("div",{className:"h-20 bg-admin-bg rounded"}),(0,s.jsx)("div",{className:"h-20 bg-admin-bg rounded"})]}),(0,s.jsx)("div",{className:"h-64 bg-admin-bg rounded"})]})})}function V(e){let{isOpen:a,onClose:t,onSuccess:r}=e,[i,d]=(0,n.useState)({name:"",displayName:"",subdomain:"",description:"",plan:"STARTER",ownerName:"",ownerEmail:"",ownerPhone:"",businessType:"",city:"",country:"ایران",isActive:!0}),[l,m]=(0,n.useState)(!1),c=(e,a)=>{d(t=>({...t,[e]:a}))},o=async e=>{e.preventDefault();try{m(!0),await (0,v.LS)({name:i.name,displayName:i.displayName||i.name,subdomain:i.subdomain,description:i.description,plan:i.plan,ownerName:i.ownerName,ownerEmail:i.ownerEmail,ownerPhone:i.ownerPhone,businessType:i.businessType,city:i.city,country:i.country,isActive:i.isActive}),g.Am.success("مستأجر جدید با موفقیت ایجاد شد"),r(),t(),d({name:"",displayName:"",subdomain:"",description:"",plan:"STARTER",ownerName:"",ownerEmail:"",ownerPhone:"",businessType:"",city:"",country:"ایران",isActive:!0})}catch(e){g.Am.error(e.message||"خطا در ایجاد مستأجر جدید")}finally{m(!1)}};return a?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-admin shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-admin-border",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(x.Z,{className:"h-6 w-6 text-admin-primary ml-2"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-admin-text",children:"ایجاد مستأجر جدید"})]}),(0,s.jsx)("button",{onClick:t,className:"text-admin-text-muted hover:text-admin-text",children:(0,s.jsx)(y.Z,{className:"h-5 w-5"})})]}),(0,s.jsxs)("form",{onSubmit:o,className:"p-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام مستأجر *"}),(0,s.jsx)("input",{type:"text",value:i.name,onChange:e=>c("name",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,placeholder:"نام مستأجر"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام نمایشی"}),(0,s.jsx)("input",{type:"text",value:i.displayName,onChange:e=>c("displayName",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"نام نمایشی"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"زیردامنه *"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"text",value:i.subdomain,onChange:e=>c("subdomain",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,placeholder:"نام زیردامنه"}),(0,s.jsx)("span",{className:"mr-2 text-admin-text-muted",children:".servaan.com"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"طرح *"}),(0,s.jsxs)("select",{value:i.plan,onChange:e=>c("plan",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,children:[(0,s.jsx)("option",{value:"STARTER",children:"استارتر"}),(0,s.jsx)("option",{value:"BUSINESS",children:"بیزینس"}),(0,s.jsx)("option",{value:"ENTERPRISE",children:"انترپرایز"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام مالک *"}),(0,s.jsx)("input",{type:"text",value:i.ownerName,onChange:e=>c("ownerName",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,placeholder:"نام مالک"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"ایمیل مالک *"}),(0,s.jsx)("input",{type:"email",value:i.ownerEmail,onChange:e=>c("ownerEmail",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",required:!0,placeholder:"ایمیل مالک"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شماره تلفن"}),(0,s.jsx)("input",{type:"tel",value:i.ownerPhone,onChange:e=>c("ownerPhone",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"شماره تلفن"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نوع کسب و کار"}),(0,s.jsx)("input",{type:"text",value:i.businessType,onChange:e=>c("businessType",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"نوع کسب و کار"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شهر"}),(0,s.jsx)("input",{type:"text",value:i.city,onChange:e=>c("city",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"شهر"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"کشور"}),(0,s.jsx)("input",{type:"text",value:i.country,onChange:e=>c("country",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"کشور"})]})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"توضیحات"}),(0,s.jsx)("textarea",{value:i.description,onChange:e=>c("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"توضیحات مستأجر"})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:i.isActive,onChange:e=>c("isActive",e.target.checked),className:"ml-2 text-admin-primary focus:ring-admin-primary"}),(0,s.jsx)("span",{className:"text-sm text-admin-text",children:"مستأجر فعال باشد"})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-3 space-x-reverse pt-6 border-t border-admin-border",children:[(0,s.jsx)("button",{type:"button",onClick:t,className:"btn-admin-secondary",disabled:l,children:"انصراف"}),(0,s.jsx)("button",{type:"submit",className:"btn-admin-primary flex items-center",disabled:l,children:l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}),"در حال ایجاد..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S,{className:"h-4 w-4 ml-2"}),"ایجاد مستأجر"]})})]})]})]})}):null}var _=t(3774);let U=(0,A.Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),D=(0,A.Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),q=(0,A.Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),z=(0,A.Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),W={name:"",displayName:"",subdomain:"",description:"",ownerName:"",ownerEmail:"",ownerPhone:"",businessType:"",city:"",country:"ایران",plan:"STARTER",features:{hasInventoryManagement:!1,hasCustomerManagement:!1,hasAccountingSystem:!1,hasReporting:!1,hasNotifications:!0,hasAdvancedReporting:!1,hasApiAccess:!1,hasCustomBranding:!1,hasMultiLocation:!1,hasAdvancedCRM:!1,hasWhatsappIntegration:!1,hasInstagramIntegration:!1,hasAnalyticsBI:!1},isActive:!0},Y=[{id:"basic",title:"اطلاعات پایه",description:"نام و زیردامنه مستأجر",icon:x.Z},{id:"owner",title:"اطلاعات مالک",description:"اطلاعات تماس مالک",icon:w.Z},{id:"business",title:"اطلاعات کسب‌وکار",description:"نوع و موقعیت کسب‌وکار",icon:_.Z},{id:"plan",title:"طرح و ویژگی‌ها",description:"انتخاب طرح و ویژگی‌ها",icon:k.Z},{id:"preview",title:"بررسی نهایی",description:"بررسی و تأیید اطلاعات",icon:p.Z}],H=["رستوران","کافه","فست فود","سوپرمارکت","فروشگاه","هتل","سالن زیبایی","کلینیک","آموزشگاه","سایر"],J=["تهران","مشهد","اصفهان","شیراز","تبریز","کرج","اهواز","قم","کرمانشاه","ارومیه","زاهدان","رشت","کرمان","همدان","یزد","اردبیل","بندرعباس","کاشان","ساری","سایر"],G={STARTER:{name:"استارتر",price:"رایگان",description:"مناسب برای کسب‌وکارهای کوچک",features:["مدیریت موجودی","مدیریت مشتریان","گزارش‌گیری پایه","اعلان‌ها"],maxUsers:5,maxItems:1e3,maxCustomers:500},BUSINESS:{name:"بیزینس",price:"۲۹۹,۰۰۰ تومان/ماه",description:"مناسب برای کسب‌وکارهای متوسط",features:["همه ویژگی‌های استارتر","سیستم حسابداری","گزارش‌گیری پیشرفته","دسترسی API","برندسازی سفارشی"],maxUsers:20,maxItems:5e3,maxCustomers:2e3},ENTERPRISE:{name:"انترپرایز",price:"۹۹۹,۰۰۰ تومان/ماه",description:"مناسب برای کسب‌وکارهای بزرگ",features:["همه ویژگی‌های بیزینس","چند شعبه","CRM پیشرفته","اتصال واتساپ","اتصال اینستاگرام","تحلیل داده"],maxUsers:100,maxItems:5e4,maxCustomers:1e4}};function X(e){let{isOpen:a,onClose:t,onSuccess:r}=e,[d,l]=(0,n.useState)(0),[m,c]=(0,n.useState)(W),[o,x]=(0,n.useState)(!1),[u,h]=(0,n.useState)(!1),[p,b]=(0,n.useState)(null),[j,f]=(0,n.useState)({});(0,n.useEffect)(()=>{a&&(c(W),l(0),f({}),b(null))},[a]);let N=async e=>{if(!e||e.length<3){b(null);return}h(!0);try{let a=await (0,v.aI)(e);b(a.available)}catch(e){b(!1)}finally{h(!1)}};(0,n.useEffect)(()=>{let e=setTimeout(()=>{m.subdomain&&N(m.subdomain)},500);return()=>clearTimeout(e)},[m.subdomain]);let w=(e,a)=>{c(t=>({...t,[e]:a})),j[e]&&f(a=>({...a,[e]:""}))},k=(e,a)=>{c(t=>({...t,features:{...t.features,[e]:a}}))},C=e=>{let a={};switch(e){case 0:m.name.trim()||(a.name="نام مستأجر الزامی است"),m.displayName.trim()||(a.displayName="نام نمایشی الزامی است"),m.subdomain.trim()?m.subdomain.length<3?a.subdomain="زیردامنه باید حداقل ۳ کاراکتر باشد":/^[a-zA-Z0-9-]+$/.test(m.subdomain)?!1===p&&(a.subdomain="این زیردامنه قبلاً استفاده شده است"):a.subdomain="زیردامنه فقط می‌تواند شامل حروف، اعداد و خط تیره باشد":a.subdomain="زیردامنه الزامی است";break;case 1:m.ownerName.trim()||(a.ownerName="نام مالک الزامی است"),m.ownerEmail.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.ownerEmail)||(a.ownerEmail="ایمیل معتبر نیست"):a.ownerEmail="ایمیل مالک الزامی است";break;case 2:m.businessType.trim()||(a.businessType="نوع کسب‌وکار الزامی است"),m.city.trim()||(a.city="شهر الزامی است")}return f(a),0===Object.keys(a).length},A=async()=>{if(C(d)){x(!0);try{let e={name:m.name,displayName:m.displayName,subdomain:m.subdomain,description:m.description,plan:m.plan,ownerName:m.ownerName,ownerEmail:m.ownerEmail,ownerPhone:m.ownerPhone,businessType:m.businessType,city:m.city,country:m.country,isActive:m.isActive,features:m.features};await (0,v.LS)(e),g.ZP.success("مستأجر با موفقیت ایجاد شد"),r(),t()}catch(e){g.ZP.error(e.message||"خطا در ایجاد مستأجر")}finally{x(!1)}}};return a?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-admin w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[(0,s.jsxs)("div",{className:"border-b border-admin-border p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-admin-text",children:"ایجاد مستأجر جدید"}),(0,s.jsxs)("p",{className:"text-admin-text-muted",children:["مرحله ",d+1," از ",Y.length]})]}),(0,s.jsx)("button",{onClick:t,className:"text-admin-text-muted hover:text-admin-text",children:(0,s.jsx)(y.Z,{className:"h-6 w-6"})})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:Y.map((e,a)=>{let t=e.icon,n=a===d,r=a<d;return(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2 ".concat(n?"border-admin-primary bg-admin-primary text-white":r?"border-green-500 bg-green-500 text-white":"border-admin-border bg-white text-admin-text-muted"),children:r?(0,s.jsx)(D,{className:"h-5 w-5"}):(0,s.jsx)(t,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{className:"mr-3 text-right",children:[(0,s.jsx)("p",{className:"text-sm font-medium ".concat(n?"text-admin-primary":"text-admin-text-muted"),children:e.title}),(0,s.jsx)("p",{className:"text-xs text-admin-text-muted",children:e.description})]}),a<Y.length-1&&(0,s.jsx)(q,{className:"h-4 w-4 text-admin-text-muted mx-4"})]},e.id)})})})]}),(0,s.jsx)("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:(()=>{switch(d){case 0:return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام مستأجر *"}),(0,s.jsx)("input",{type:"text",value:m.name,onChange:e=>w("name",e.target.value),className:"w-full px-3 py-2 border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent ".concat(j.name?"border-red-500":"border-admin-border"),placeholder:"نام کسب‌وکار"}),j.name&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام نمایشی *"}),(0,s.jsx)("input",{type:"text",value:m.displayName,onChange:e=>w("displayName",e.target.value),className:"w-full px-3 py-2 border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent ".concat(j.displayName?"border-red-500":"border-admin-border"),placeholder:"نام نمایشی در پنل"}),j.displayName&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.displayName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"زیردامنه *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",value:m.subdomain,onChange:e=>w("subdomain",e.target.value.toLowerCase()),className:"w-full px-3 py-2 pr-20 border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent ".concat(j.subdomain?"border-red-500":"border-admin-border"),placeholder:"subdomain"}),(0,s.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-sm text-admin-text-muted",children:".servaan.com"}),u&&(0,s.jsx)("div",{className:"absolute left-12 top-1/2 transform -translate-y-1/2",children:(0,s.jsx)(U,{className:"h-4 w-4 animate-spin text-admin-primary"})}),!u&&null!==p&&(0,s.jsx)("div",{className:"absolute left-12 top-1/2 transform -translate-y-1/2",children:p?(0,s.jsx)(i.Z,{className:"h-4 w-4 text-green-500"}):(0,s.jsx)(y.Z,{className:"h-4 w-4 text-red-500"})})]}),j.subdomain&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.subdomain}),!0===p&&(0,s.jsx)("p",{className:"text-green-500 text-sm mt-1",children:"این زیردامنه در دسترس است"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"توضیحات"}),(0,s.jsx)("textarea",{value:m.description,onChange:e=>w("description",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",rows:3,placeholder:"توضیحات کوتاه درباره کسب‌وکار"})]})]});case 1:return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نام مالک *"}),(0,s.jsx)("input",{type:"text",value:m.ownerName,onChange:e=>w("ownerName",e.target.value),className:"w-full px-3 py-2 border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent ".concat(j.ownerName?"border-red-500":"border-admin-border"),placeholder:"نام کامل مالک"}),j.ownerName&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.ownerName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"ایمیل مالک *"}),(0,s.jsx)("input",{type:"email",value:m.ownerEmail,onChange:e=>w("ownerEmail",e.target.value),className:"w-full px-3 py-2 border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent ".concat(j.ownerEmail?"border-red-500":"border-admin-border"),placeholder:"owner@example.com"}),j.ownerEmail&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.ownerEmail})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شماره تماس"}),(0,s.jsx)("input",{type:"tel",value:m.ownerPhone,onChange:e=>w("ownerPhone",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",placeholder:"09123456789"})]})]});case 2:return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نوع کسب‌وکار *"}),(0,s.jsxs)("select",{value:m.businessType,onChange:e=>w("businessType",e.target.value),className:"w-full px-3 py-2 border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent ".concat(j.businessType?"border-red-500":"border-admin-border"),children:[(0,s.jsx)("option",{value:"",children:"انتخاب کنید"}),H.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),j.businessType&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.businessType})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شهر *"}),(0,s.jsxs)("select",{value:m.city,onChange:e=>w("city",e.target.value),className:"w-full px-3 py-2 border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent ".concat(j.city?"border-red-500":"border-admin-border"),children:[(0,s.jsx)("option",{value:"",children:"انتخاب کنید"}),J.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),j.city&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.city})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"کشور"}),(0,s.jsxs)("select",{value:m.country,onChange:e=>w("country",e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[(0,s.jsx)("option",{value:"ایران",children:"ایران"}),(0,s.jsx)("option",{value:"ترکیه",children:"ترکیه"}),(0,s.jsx)("option",{value:"امارات",children:"امارات"}),(0,s.jsx)("option",{value:"سایر",children:"سایر"})]})]})]});case 3:return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-4",children:"انتخاب طرح"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(G).map(e=>{let[a,t]=e;return(0,s.jsxs)("div",{className:"border-2 rounded-admin p-4 cursor-pointer transition-all ".concat(m.plan===a?"border-admin-primary bg-admin-primary bg-opacity-10":"border-admin-border hover:border-admin-primary"),onClick:()=>w("plan",a),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h3",{className:"font-medium text-admin-text",children:t.name}),m.plan===a&&(0,s.jsx)(D,{className:"h-5 w-5 text-admin-primary"})]}),(0,s.jsx)("p",{className:"text-lg font-bold text-admin-primary mb-2",children:t.price}),(0,s.jsx)("p",{className:"text-sm text-admin-text-muted mb-3",children:t.description}),(0,s.jsx)("ul",{className:"text-sm text-admin-text space-y-1",children:t.features.map((e,a)=>(0,s.jsxs)("li",{className:"flex items-center",children:[(0,s.jsx)(D,{className:"h-3 w-3 text-green-500 ml-1"}),e]},a))}),(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t border-admin-border text-xs text-admin-text-muted",children:[(0,s.jsxs)("p",{children:["حداکثر کاربران: ",t.maxUsers]}),(0,s.jsxs)("p",{children:["حداکثر آیتم: ",t.maxItems.toLocaleString()]}),(0,s.jsxs)("p",{children:["حداکثر مشتری: ",t.maxCustomers.toLocaleString()]})]})]},a)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-4",children:"ویژگی‌های اضافی"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{key:"hasInventoryManagement",label:"مدیریت موجودی پیشرفته",description:"مدیریت کامل موجودی و انبار"},{key:"hasCustomerManagement",label:"مدیریت مشتریان",description:"سیستم CRM برای مدیریت مشتریان"},{key:"hasAccountingSystem",label:"سیستم حسابداری",description:"حسابداری کامل و گزارش‌های مالی"},{key:"hasReporting",label:"گزارش‌گیری پایه",description:"گزارش‌های ساده و کاربردی"},{key:"hasAdvancedReporting",label:"گزارش‌گیری پیشرفته",description:"گزارش‌های تحلیلی و نمودارها"},{key:"hasApiAccess",label:"دسترسی API",description:"دسترسی به API برای توسعه"},{key:"hasCustomBranding",label:"برندسازی سفارشی",description:"لوگو و رنگ‌بندی سفارشی"},{key:"hasMultiLocation",label:"چند شعبه",description:"مدیریت چندین شعبه"},{key:"hasAdvancedCRM",label:"CRM پیشرفته",description:"سیستم CRM حرفه‌ای"},{key:"hasWhatsappIntegration",label:"اتصال واتساپ",description:"ارسال پیام از طریق واتساپ"},{key:"hasInstagramIntegration",label:"اتصال اینستاگرام",description:"مدیریت پست‌های اینستاگرام"},{key:"hasAnalyticsBI",label:"تحلیل داده",description:"ابزارهای تحلیل و هوش تجاری"}].map(e=>(0,s.jsxs)("div",{className:"flex items-start space-x-3 space-x-reverse",children:[(0,s.jsx)("input",{type:"checkbox",checked:m.features[e.key],onChange:a=>k(e.key,a.target.checked),className:"h-4 w-4 text-admin-primary focus:ring-admin-primary border-admin-border rounded mt-1"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-admin-text",children:e.label}),(0,s.jsx)("p",{className:"text-xs text-admin-text-muted",children:e.description})]})]},e.key))})]})]});case 4:return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-admin-bg rounded-admin p-4",children:[(0,s.jsx)("h3",{className:"font-medium text-admin-text mb-4",children:"خلاصه اطلاعات"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-admin-text mb-2",children:"اطلاعات پایه"}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-admin-text-muted",children:"نام:"})," ",m.name]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-admin-text-muted",children:"نام نمایشی:"})," ",m.displayName]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-admin-text-muted",children:"زیردامنه:"})," ",m.subdomain,".servaan.com"]}),m.description&&(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-admin-text-muted",children:"توضیحات:"})," ",m.description]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-admin-text mb-2",children:"اطلاعات مالک"}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-admin-text-muted",children:"نام:"})," ",m.ownerName]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-admin-text-muted",children:"ایمیل:"})," ",m.ownerEmail]}),m.ownerPhone&&(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-admin-text-muted",children:"تلفن:"})," ",m.ownerPhone]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-admin-text mb-2",children:"اطلاعات کسب‌وکار"}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-admin-text-muted",children:"نوع:"})," ",m.businessType]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-admin-text-muted",children:"شهر:"})," ",m.city]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-admin-text-muted",children:"کشور:"})," ",m.country]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-admin-text mb-2",children:"طرح و ویژگی‌ها"}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-admin-text-muted",children:"طرح:"})," ",G[m.plan].name]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-admin-text-muted",children:"قیمت:"})," ",G[m.plan].price]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-admin-text-muted",children:"وضعیت:"})," ",m.isActive?"فعال":"غیرفعال"]})]})]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h4",{className:"font-medium text-admin-text mb-2",children:"ویژگی‌های فعال"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(m.features).filter(e=>{let[a,t]=e;return t}).map(e=>{let[a,t]=e,n=[{key:"hasInventoryManagement",label:"مدیریت موجودی"},{key:"hasCustomerManagement",label:"مدیریت مشتریان"},{key:"hasAccountingSystem",label:"سیستم حسابداری"},{key:"hasReporting",label:"گزارش‌گیری"},{key:"hasAdvancedReporting",label:"گزارش‌گیری پیشرفته"},{key:"hasApiAccess",label:"دسترسی API"},{key:"hasCustomBranding",label:"برندسازی سفارشی"},{key:"hasMultiLocation",label:"چند شعبه"},{key:"hasAdvancedCRM",label:"CRM پیشرفته"},{key:"hasWhatsappIntegration",label:"اتصال واتساپ"},{key:"hasInstagramIntegration",label:"اتصال اینستاگرام"},{key:"hasAnalyticsBI",label:"تحلیل داده"}].find(e=>e.key===a);return(0,s.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-admin-primary text-white",children:[(0,s.jsx)(D,{className:"h-3 w-3 ml-1"}),null==n?void 0:n.label]},a)})})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[(0,s.jsx)("input",{type:"checkbox",id:"confirm",className:"h-4 w-4 text-admin-primary focus:ring-admin-primary border-admin-border rounded"}),(0,s.jsx)("label",{htmlFor:"confirm",className:"text-sm text-admin-text",children:"تأیید می‌کنم که اطلاعات وارد شده صحیح است و مستأجر با این تنظیمات ایجاد شود"})]})]});default:return null}})()}),(0,s.jsx)("div",{className:"border-t border-admin-border p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("button",{onClick:()=>{l(e=>Math.max(e-1,0))},disabled:0===d,className:"btn-admin-secondary flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(z,{className:"h-4 w-4 ml-2"}),"قبلی"]}),(0,s.jsx)("div",{className:"flex items-center space-x-2 space-x-reverse",children:d===Y.length-1?(0,s.jsxs)("button",{onClick:A,disabled:o,className:"btn-admin-primary flex items-center",children:[o?(0,s.jsx)(U,{className:"h-4 w-4 ml-2 animate-spin"}):(0,s.jsx)(D,{className:"h-4 w-4 ml-2"}),"ایجاد مستأجر"]}):(0,s.jsxs)("button",{onClick:()=>{C(d)&&l(e=>Math.min(e+1,Y.length-1))},className:"btn-admin-primary flex items-center",children:["بعدی",(0,s.jsx)(q,{className:"h-4 w-4 mr-2"})]})})]})})]})}):null}let $=(0,A.Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var K=t(3247),Q=t(1047);function ee(e){let{onFiltersChange:a,onClearFilters:t,initialFilters:r={}}=e,[i,d]=(0,n.useState)(!1),[l,m]=(0,n.useState)(r),[c,o]=(0,n.useState)([]),[x,p]=(0,n.useState)(!1),[b,j]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=localStorage.getItem("tenant-saved-searches");if(e)try{o(JSON.parse(e))}catch(e){console.error("Error loading saved searches:",e)}},[]),(0,n.useEffect)(()=>{a(l)},[l]);let v=(e,a)=>{m(t=>({...t,[e]:a||void 0}))},f=e=>{m(e.filters),g.ZP.success('جستجوی "'.concat(e.name,'" بارگذاری شد'))},N=e=>{let a=c.filter(a=>a.id!==e);o(a),localStorage.setItem("tenant-saved-searches",JSON.stringify(a)),g.ZP.success("جستجوی ذخیره شده حذف شد")},w=e=>e?new Date(e).toISOString().split("T")[0]:"";return(0,s.jsxs)("div",{className:"bg-white rounded-admin border border-admin-border p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-admin-text",children:"جستجو و فیلتر پیشرفته"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[(0,s.jsxs)("button",{onClick:()=>d(!i),className:"btn-admin-secondary flex items-center",children:[(0,s.jsx)($,{className:"h-4 w-4 ml-2"}),i?"مخفی کردن فیلترها":"نمایش فیلترها"]}),Object.keys(l).length>0&&(0,s.jsxs)("button",{onClick:()=>{m({}),t(),g.ZP.success("فیلترها پاک شدند")},className:"btn-admin-danger flex items-center",children:[(0,s.jsx)(y.Z,{className:"h-4 w-4 ml-2"}),"پاک کردن فیلترها"]})]})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(K.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),(0,s.jsx)("input",{type:"text",placeholder:"جستجو در نام، زیردامنه، ایمیل، شهر، کشور...",value:l.search||"",onChange:e=>v("search",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})}),c.length>0&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-admin-text",children:"جستجوهای ذخیره شده"}),(0,s.jsxs)("button",{onClick:()=>p(!0),className:"text-admin-primary hover:text-admin-primary-dark text-sm flex items-center",children:[(0,s.jsx)(S,{className:"h-3 w-3 ml-1"}),"ذخیره جستجو"]})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:c.map(e=>(0,s.jsxs)("div",{className:"flex items-center bg-admin-bg rounded-admin px-3 py-1",children:[(0,s.jsx)("button",{onClick:()=>f(e),className:"text-sm text-admin-text hover:text-admin-primary mr-2",children:e.name}),(0,s.jsx)("button",{onClick:()=>N(e.id),className:"text-admin-danger hover:text-admin-danger-dark",children:(0,s.jsx)(y.Z,{className:"h-3 w-3"})})]},e.id))})]}),i&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"وضعیت"}),(0,s.jsxs)("select",{value:l.status||"all",onChange:e=>v("status","all"===e.target.value?void 0:e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[(0,s.jsx)("option",{value:"all",children:"همه"}),(0,s.jsx)("option",{value:"active",children:"فعال"}),(0,s.jsx)("option",{value:"inactive",children:"غیرفعال"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"طرح"}),(0,s.jsxs)("select",{value:l.plan||"all",onChange:e=>v("plan","all"===e.target.value?void 0:e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[(0,s.jsx)("option",{value:"all",children:"همه"}),(0,s.jsx)("option",{value:"STARTER",children:"استارتر"}),(0,s.jsx)("option",{value:"BUSINESS",children:"بیزینس"}),(0,s.jsx)("option",{value:"ENTERPRISE",children:"انترپرایز"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"نوع کسب‌وکار"}),(0,s.jsxs)("select",{value:l.businessType||"all",onChange:e=>v("businessType","all"===e.target.value?void 0:e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[(0,s.jsx)("option",{value:"all",children:"همه"}),(0,s.jsx)("option",{value:"رستوران",children:"رستوران"}),(0,s.jsx)("option",{value:"کافه",children:"کافه"}),(0,s.jsx)("option",{value:"فست فود",children:"فست فود"}),(0,s.jsx)("option",{value:"سوپرمارکت",children:"سوپرمارکت"}),(0,s.jsx)("option",{value:"فروشگاه",children:"فروشگاه"}),(0,s.jsx)("option",{value:"سایر",children:"سایر"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"شهر"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(_.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),(0,s.jsx)("input",{type:"text",placeholder:"نام شهر",value:l.city||"",onChange:e=>v("city",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"کشور"}),(0,s.jsxs)("select",{value:l.country||"all",onChange:e=>v("country","all"===e.target.value?void 0:e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent",children:[(0,s.jsx)("option",{value:"all",children:"همه"}),(0,s.jsx)("option",{value:"ایران",children:"ایران"}),(0,s.jsx)("option",{value:"ترکیه",children:"ترکیه"}),(0,s.jsx)("option",{value:"امارات",children:"امارات"}),(0,s.jsx)("option",{value:"سایر",children:"سایر"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"تاریخ ایجاد از"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(Q.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),(0,s.jsx)("input",{type:"date",value:w(l.createdFrom),onChange:e=>v("createdFrom",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"تاریخ ایجاد تا"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(Q.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),(0,s.jsx)("input",{type:"date",value:w(l.createdTo),onChange:e=>v("createdTo",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"درآمد ماهانه از (ریال)"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(h.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),(0,s.jsx)("input",{type:"number",placeholder:"حداقل درآمد",value:l.revenueFrom||"",onChange:e=>v("revenueFrom",e.target.value?Number(e.target.value):void 0),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"درآمد ماهانه تا (ریال)"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(h.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),(0,s.jsx)("input",{type:"number",placeholder:"حداکثر درآمد",value:l.revenueTo||"",onChange:e=>v("revenueTo",e.target.value?Number(e.target.value):void 0),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"تعداد کاربران از"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(u.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),(0,s.jsx)("input",{type:"number",placeholder:"حداقل کاربران",value:l.userCountFrom||"",onChange:e=>v("userCountFrom",e.target.value?Number(e.target.value):void 0),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"تعداد کاربران تا"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(u.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-admin-text-muted"}),(0,s.jsx)("input",{type:"number",placeholder:"حداکثر کاربران",value:l.userCountTo||"",onChange:e=>v("userCountTo",e.target.value?Number(e.target.value):void 0),className:"w-full pl-10 pr-4 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-admin-text mb-2",children:"ویژگی‌های فعال"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:[{key:"hasInventoryManagement",label:"مدیریت موجودی"},{key:"hasCustomerManagement",label:"مدیریت مشتریان"},{key:"hasAccountingSystem",label:"سیستم حسابداری"},{key:"hasReporting",label:"گزارش‌گیری"},{key:"hasNotifications",label:"اعلان‌ها"},{key:"hasAdvancedReporting",label:"گزارش‌گیری پیشرفته"},{key:"hasApiAccess",label:"دسترسی API"},{key:"hasCustomBranding",label:"برندسازی سفارشی"},{key:"hasMultiLocation",label:"چند شعبه"},{key:"hasAdvancedCRM",label:"CRM پیشرفته"},{key:"hasWhatsappIntegration",label:"اتصال واتساپ"},{key:"hasInstagramIntegration",label:"اتصال اینستاگرام"},{key:"hasAnalyticsBI",label:"تحلیل داده"}].map(e=>{var a;return(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:(null===(a=l.hasFeatures)||void 0===a?void 0:a.includes(e.key))||!1,onChange:a=>{let t=l.hasFeatures||[],s=a.target.checked?[...t,e.key]:t.filter(a=>a!==e.key);v("hasFeatures",s.length>0?s:void 0)},className:"h-4 w-4 text-admin-primary focus:ring-admin-primary border-admin-border rounded"}),(0,s.jsx)("span",{className:"mr-2 text-sm text-admin-text",children:e.label})]},e.key)})})]})]}),x&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-admin p-6 w-96",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-admin-text mb-4",children:"ذخیره جستجو"}),(0,s.jsx)("input",{type:"text",placeholder:"نام جستجو",value:b,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-admin-border rounded-admin focus:ring-2 focus:ring-admin-primary focus:border-transparent mb-4"}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2 space-x-reverse",children:[(0,s.jsx)("button",{onClick:()=>p(!1),className:"btn-admin-secondary",children:"انصراف"}),(0,s.jsx)("button",{onClick:()=>{if(!b.trim()){g.ZP.error("لطفاً نام جستجو را وارد کنید");return}let e=[...c,{id:Date.now().toString(),name:b,filters:{...l},createdAt:new Date}];o(e),localStorage.setItem("tenant-saved-searches",JSON.stringify(e)),p(!1),j(""),g.ZP.success("جستجو ذخیره شد")},className:"btn-admin-primary",children:"ذخیره"})]})]})})]})}var ea=(0,N.c2)(function(){let e=(0,r.useRouter)(),[a,t]=(0,n.useState)([]),[N,y]=(0,n.useState)(!0),[w,k]=(0,n.useState)(null),[C,A]=(0,n.useState)({page:1,limit:10,total:0,pages:0}),[S,I]=(0,n.useState)({}),[M,Z]=(0,n.useState)([]),[T,P]=(0,n.useState)(!1),[L,F]=(0,n.useState)(null),[B,_]=(0,n.useState)(!1),[U,D]=(0,n.useState)(!1),[q,z]=(0,n.useState)(!1),[W,Y]=(0,n.useState)(null),H=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{y(!0),k(null);let a={page:e.page||C.page,limit:e.limit||C.limit,...e},s=await (0,v.ax)(a);t(s.tenants),A(s.pagination)}catch(a){let e=a instanceof Error?a.message:"خطا در بارگذاری داده‌ها";k(e),g.Am.error(e)}finally{y(!1)}};(0,n.useEffect)(()=>{H()},[]),(0,n.useEffect)(()=>{H({...S,page:1})},[S]);let J=(0,n.useCallback)(e=>{I({...S,...e})},[S]),G=(0,n.useCallback)(()=>{I({})},[]),$=e=>{H({page:e})},K=e=>{Z(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},Q=e=>{F(e),_(!0)},ea=async e=>{let s=!(e.isActive||"ACTIVE"===e.status),n=e.id;Y(n),t(e=>e.map(e=>e.id===n?{...e,isActive:s,status:s?"ACTIVE":"INACTIVE"}:e));try{s?(await (0,v.VY)(n),g.Am.success("مستأجر فعال شد")):(await (0,v.Yn)(n),g.Am.success("مستأجر غیرفعال شد"))}catch(s){t(a);let e=s instanceof Error?s.message:"خطا در تغییر وضعیت مستأجر";g.Am.error(e)}finally{Y(null)}},et=()=>{H(),Z([])},es=async e=>{try{await (0,v.oL)(e),g.Am.success("داده‌ها با موفقیت به فرمت ".concat(e," صادر شد"))}catch(a){let e=a instanceof Error?a.message:"خطا در صادرات داده‌ها";g.Am.error(e)}},en=e=>e?(0,s.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-admin-success text-white",children:[(0,s.jsx)(i.Z,{className:"h-3 w-3 ml-1"}),"فعال"]}):(0,s.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-admin-danger text-white",children:[(0,s.jsx)(d.Z,{className:"h-3 w-3 ml-1"}),"غیرفعال"]}),er=e=>(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat({STARTER:"bg-admin-info text-white",BUSINESS:"bg-admin-warning text-white",ENTERPRISE:"bg-admin-primary text-white"}[e]||"bg-admin-bg text-admin-text"),children:{STARTER:"استارتر",BUSINESS:"بیزینس",ENTERPRISE:"انترپرایز"}[e]||e}),ei=e=>"".concat(Math.floor((e||0)/10).toLocaleString("fa-IR")," تومان");return(0,s.jsxs)("div",{className:"min-h-screen bg-admin-bg",children:[(0,s.jsx)("div",{className:"bg-white border-b border-admin-border px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-admin-text",children:"مدیریت مستأجرین"}),(0,s.jsx)("p",{className:"text-admin-text-light",children:"مدیریت و نظارت بر مستأجرین پلتفرم"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 space-x-reverse",children:[(0,s.jsxs)("button",{onClick:()=>P(!T),className:"btn-admin-secondary flex items-center ".concat(T?"bg-admin-primary text-white":""),children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 ml-2"}),T?"مخفی کردن تحلیل":"نمایش تحلیل"]}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsxs)("button",{className:"btn-admin-secondary flex items-center",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 ml-2"}),"صادرات",(0,s.jsx)("svg",{className:"h-4 w-4 mr-2 transition-transform group-hover:rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,s.jsx)("div",{className:"absolute top-full left-0 mt-2 w-32 bg-white border border-admin-border rounded-admin shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsx)("button",{onClick:()=>es("csv"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"CSV"}),(0,s.jsx)("button",{onClick:()=>es("excel"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"Excel"}),(0,s.jsx)("button",{onClick:()=>es("pdf"),className:"w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg transition-colors",children:"PDF"})]})})]}),(0,s.jsxs)("button",{onClick:()=>{z(!0)},className:"btn-admin-primary flex items-center",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 ml-2"}),"مستأجر جدید"]}),(0,s.jsx)("button",{onClick:()=>H({sortBy:"monthlyRevenue",sortDir:"desc",page:1}),className:"btn-admin-secondary",children:"مرتب‌سازی بر اساس درآمد ماه"}),(0,s.jsx)("button",{onClick:()=>H({sortBy:"ordersThisMonth",sortDir:"desc",page:1}),className:"btn-admin-secondary",children:"مرتب‌سازی بر اساس سفارشات ماه"}),(0,s.jsx)("button",{onClick:()=>H({refresh:!0}),className:"btn-admin-secondary",children:"بروزرسانی (بدون کش)"})]})]})}),T&&(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)(O,{})}),(0,s.jsx)(R,{tenants:a,selectedTenants:M,onSelectionChange:Z,onRefresh:et,currentFilters:S}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)(ee,{onFiltersChange:J,onClearFilters:G,initialFilters:S}),w?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(o.Z,{className:"h-16 w-16 text-admin-danger mx-auto mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-admin-text mb-2",children:"خطا در بارگذاری داده‌ها"}),(0,s.jsx)("p",{className:"text-admin-text-light mb-4",children:w}),(0,s.jsx)("button",{onClick:()=>H(),className:"btn-admin-primary",children:"تلاش مجدد"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-white rounded-admin border border-admin-border overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-admin-border",children:[(0,s.jsx)("thead",{className:"bg-admin-bg",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:(0,s.jsx)("input",{type:"checkbox",checked:M.length===a.length&&a.length>0,onChange:()=>{M.length===a.length?Z([]):Z(a.map(e=>e.id))},className:"h-4 w-4 text-admin-primary focus:ring-admin-primary border-admin-border rounded"})}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"مستأجر"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"طرح"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"کاربران"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"درآمد ماهانه"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"وضعیت"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"تاریخ ایجاد"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-admin-text-muted uppercase tracking-wider",children:"عملیات"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-admin-border",children:N?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:8,className:"px-6 py-4 text-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-admin-primary mx-auto"})})}):0===a.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:8,className:"px-6 py-8 text-center text-admin-text-muted",children:"هیچ مستأجری یافت نشد"})}):a.map(a=>(0,s.jsxs)("tr",{className:"hover:bg-admin-bg transition-colors",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("input",{type:"checkbox",checked:M.includes(a.id),onChange:()=>K(a.id),className:"h-4 w-4 text-admin-primary focus:ring-admin-primary border-admin-border rounded"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-admin-primary flex items-center justify-center",children:(0,s.jsx)(x.Z,{className:"h-5 w-5 text-white"})})}),(0,s.jsxs)("div",{className:"mr-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-admin-text",children:a.displayName||a.name}),(0,s.jsxs)("div",{className:"text-sm text-admin-text-light",children:[a.subdomain,".servaan.com"]}),(0,s.jsx)("div",{className:"text-xs text-admin-text-muted",children:a.businessType||"نامشخص"})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:er(a.plan)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center text-sm text-admin-text",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 ml-1 text-admin-text-muted"}),a.userCount||0]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center text-sm text-admin-text",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 ml-1 text-admin-text-muted"}),ei(a.monthlyRevenue||0)]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:en(a.isActive||"ACTIVE"===a.status)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-admin-text-muted",children:(0,f.cp)(a.createdAt,{format:"short"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),e.push("/admin/tenants/".concat(a.id))},className:"text-admin-primary hover:text-admin-primary-dark",title:"مشاهده جزئیات",children:(0,s.jsx)(p.Z,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),Q(a)},className:"text-admin-warning hover:text-admin-warning-dark",title:"ویرایش",children:(0,s.jsx)(b.Z,{className:"h-4 w-4"})}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),ea(a)},disabled:W===a.id,className:"hover:opacity-80 ".concat(a.isActive||"ACTIVE"===a.status?"text-admin-danger":"text-admin-success"),title:a.isActive||"ACTIVE"===a.status?"غیرفعال‌سازی":"فعال‌سازی",children:W===a.id?(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2"}):a.isActive||"ACTIVE"===a.status?(0,s.jsx)(d.Z,{className:"h-4 w-4"}):(0,s.jsx)(i.Z,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("button",{onClick:e=>e.stopPropagation(),className:"text-admin-text-muted hover:text-admin-text",title:"عملیات بیشتر",children:(0,s.jsx)(j.Z,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"absolute left-0 bottom-full mb-2 bg-white border border-admin-border rounded-admin shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-150 z-10 min-w-[160px]",children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),Q(a)},className:"block w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg",children:"ویرایش"}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),ea(a)},className:"block w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg",children:a.isActive||"ACTIVE"===a.status?"غیرفعال‌سازی":"فعال‌سازی"}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),e.push("/admin/tenants/".concat(a.id))},className:"block w-full text-right px-4 py-2 text-sm text-admin-text hover:bg-admin-bg",children:"مشاهده"})]})]})]})})]},a.id))})]})})}),C.pages>1&&(0,s.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-sm text-admin-text-muted",children:["نمایش ",(C.page-1)*C.limit+1," تا ",Math.min(C.page*C.limit,C.total)," از ",C.total," نتیجه"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 space-x-reverse",children:[(0,s.jsx)("button",{onClick:()=>$(C.page-1),disabled:1===C.page,className:"px-3 py-2 text-sm font-medium text-admin-text bg-white border border-admin-border rounded-admin hover:bg-admin-bg disabled:opacity-50 disabled:cursor-not-allowed",children:"قبلی"}),Array.from({length:Math.min(5,C.pages)},(e,a)=>{let t=a+1;return(0,s.jsx)("button",{onClick:()=>$(t),className:"px-3 py-2 text-sm font-medium rounded-admin ".concat(t===C.page?"bg-admin-primary text-white":"text-admin-text bg-white border border-admin-border hover:bg-admin-bg"),children:t},t)}),(0,s.jsx)("button",{onClick:()=>$(C.page+1),disabled:C.page===C.pages,className:"px-3 py-2 text-sm font-medium text-admin-text bg-white border border-admin-border rounded-admin hover:bg-admin-bg disabled:opacity-50 disabled:cursor-not-allowed",children:"بعدی"})]})]})]})]}),(0,s.jsx)(E,{tenant:L,isOpen:B,onClose:()=>{_(!1),F(null)},onSave:e=>{let a={id:e.id,name:e.name,displayName:e.displayName,subdomain:e.subdomain,description:e.description,businessType:e.businessType,city:e.city,country:e.country,status:"ACTIVE",plan:e.plan,isActive:e.isActive,ownerName:e.ownerName,ownerEmail:e.ownerEmail,ownerPhone:e.ownerPhone,createdAt:e.createdAt,updatedAt:e.updatedAt,userCount:0,storageUsed:0,storageLimit:0,features:e.features,metrics:{userCount:0,customerCount:0,orderCount:0,revenue:0}};t(t=>t.map(t=>t.id===e.id?a:t)),g.Am.success("مستأجر با موفقیت به‌روزرسانی شد")}}),(0,s.jsx)(V,{isOpen:U,onClose:()=>D(!1),onSuccess:()=>{et(),D(!1)}}),(0,s.jsx)(X,{isOpen:q,onClose:()=>z(!1),onSuccess:()=>{et(),z(!1)}})]})})},780:function(e,a,t){"use strict";t.d(a,{xG:function(){return n}});let s={SYMBOL:"تومان",LOCALE:"fa-IR",DECIMAL_PLACES:0,MIN_AMOUNT:0,MAX_AMOUNT:999999999999};function n(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{includeCurrency:t=!0,minimumFractionDigits:n=s.DECIMAL_PLACES,maximumFractionDigits:r=s.DECIMAL_PLACES,locale:i=s.LOCALE}=a,d=function(e){if(null==e)return{isValid:!1,value:0,error:"Amount cannot be null or undefined"};let a="string"==typeof e?parseFloat(e):Number(e);return isNaN(a)?{isValid:!1,value:0,error:"Amount must be a valid number"}:a<s.MIN_AMOUNT?{isValid:!1,value:a,error:"Amount must be at least ".concat(s.MIN_AMOUNT," Toman")}:a>s.MAX_AMOUNT?{isValid:!1,value:a,error:"Amount cannot exceed ".concat(s.MAX_AMOUNT," Toman")}:{isValid:!0,value:Math.round(a)}}(e);if(!d.isValid)return t?"۰ ".concat(s.SYMBOL):"۰";try{let e=new Intl.NumberFormat(i,{minimumFractionDigits:n,maximumFractionDigits:r}).format(d.value);return t?"".concat(e," ").concat(s.SYMBOL):e}catch(e){return console.error("Error formatting currency:",e),t?"۰ ".concat(s.SYMBOL):"۰"}}}},function(e){e.O(0,[301,64,975,902,443,971,117,744],function(){return e(e.s=7899)}),_N_E=e.O()}]);